function aaa(){document.getElementById("savediv")&&(document.getElementById("savediv").style.display="none")}var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n},__awaiter=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(o,r){function s(t){try{c(i.next(t))}catch(e){r(e)}}function a(t){try{c(i["throw"](t))}catch(e){r(e)}}function c(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(s,a)}c((i=i.apply(t,e||[])).next())})},__generator=this&&this.__generator||function(t,e){function n(t){return function(e){return i([t,e])}}function i(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,r&&(s=r[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(r,n[1])).done)return s;switch(r=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,r=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(s=c.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){c.label=n[1];break}if(6===n[0]&&c.label<s[1]){c.label=s[1],s=n;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(n);break}s[2]&&c.ops.pop(),c.trys.pop();continue}n=e.call(t,c)}catch(i){n=[6,i],r=0}finally{o=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,r,s,a,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:n(0),"throw":n(1),"return":n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a},Dialog=function(t){function e(e,n,i,o){void 0===n&&(n=DialogAniType.none),void 0===i&&(i=!1),void 0===o&&(o=null);var r=t.call(this)||this;return r.NoCancel=!1,r.onCloseHandel=o,r.isMask=e||!0,r.aniType=n,r.isCancel=i,r.isMask?(r.blockAlpha=.86,r.block=GG.newRectBlock(r,0,r.blockAlpha)):(r.blockAlpha=0,r.block=GG.newRectBlock(r,0,r.blockAlpha)),r.dialogBox=new egret.DisplayObjectContainer,r.addChild(r.dialogBox),r.addEventListener(egret.Event.ADDED_TO_STAGE,r.onAdd,r),r.once(egret.Event.REMOVED_FROM_STAGE,r.onRemove,r),r}return __extends(e,t),e.prototype.create=function(){},e.prototype.onRemove=function(){},e.prototype.cancel=function(t){void 0===t&&(t=null),t&&this.NoCancel||(this.remove(),this.onCloseHandel&&this.onCloseHandel())},e.prototype.confirm=function(){this.remove()},e.prototype.onAdd=function(){var t=this;if(this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAdd,this),this.create(),"none"!=this.aniType){this.dialogBox.touchEnabled=this.dialogBox.touchChildren=!1,this.block.alpha=0;var e=this.dialogBox.width,n=this.dialogBox.height,i=(this.dialogBox.x,this.dialogBox.y);switch(this.aniType){case"top":this.dialogBox.y=-n,this.dialogBox.x=(stageW-e)/2,egret.Tween.get(this.block).to({alpha:this.blockAlpha},400),egret.Tween.get(this.dialogBox).to({y:GG.getCanvasStartPoint().y},800,egret.Ease.sineOut).call(function(){t.onStart()},this);break;case"bottom":this.dialogBox.y=stageH,this.dialogBox.x=(stageW-e)/2,egret.Tween.get(this.block).to({alpha:this.blockAlpha},400),egret.Tween.get(this.dialogBox).to({y:stageH-n-GG.getCanvasStartPoint().y},800,egret.Ease.sineOut).call(function(){t.onStart()},this);break;case"left":this.dialogBox.x=-e,0==i&&(this.dialogBox.y=stageHalfH-n/2),egret.Tween.get(this.block).to({alpha:this.blockAlpha},400),egret.Tween.get(this.dialogBox).to({x:GG.getCanvasStartPoint().x},800,egret.Ease.sineOut).call(function(){t.onStart()},this);break;case"right":this.dialogBox.x=stageW,0==i&&(this.dialogBox.y=stageHalfH-n/2),egret.Tween.get(this.block).to({alpha:this.blockAlpha},400),egret.Tween.get(this.dialogBox).to({x:stageW-e-GG.getCanvasStartPoint().x},800,egret.Ease.sineOut).call(function(){t.onStart()},this);break;case"center":GG.setAnchor(this.dialogBox),this.dialogBox.x=stageHalfW,this.dialogBox.y=stageHalfH,this.dialogBox.scaleX=this.dialogBox.scaleY=0,egret.Tween.get(this.block).to({alpha:this.blockAlpha},400),egret.Tween.get(this.dialogBox).to({scaleX:1,scaleY:1},600,egret.Ease.quintIn).call(function(){t.onStart()},this);break;case"alpha":this.block.alpha=0,this.dialogBox.alpha=0,this.dialogBox.x=(stageW-e)/2,this.dialogBox.y=stageHalfH-n/2,egret.Tween.get(this.block).to({alpha:this.blockAlpha},400),egret.Tween.get(this.dialogBox).to({alpha:1},400).call(function(){t.onStart()},this)}}else GG.setAnchor(this.dialogBox),this.dialogBox.x=stageHalfW,this.dialogBox.y=stageHalfH,this.onStart()},e.prototype.onStart=function(){this.dialogBox.touchEnabled=!0,this.dialogBox.touchChildren=!0,this.isCancel&&this.block.addEventListener(egret.TouchEvent.TOUCH_TAP,this.cancel,this)},e.prototype.remove=function(){var t=this;if(this.dialogBox.touchEnabled=this.dialogBox.touchChildren=!1,this.block.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.cancel,this),"none"!=this.aniType){var e=this.dialogBox.width,n=this.dialogBox.height;switch(this.aniType){case"top":egret.Tween.get(this.block).to({alpha:0},400),egret.Tween.get(this.dialogBox).to({y:-n},800,egret.Ease.sineIn).call(function(){GG.removeDisplayObject(t)},this);break;case"bottom":egret.Tween.get(this.block).to({alpha:0},400),egret.Tween.get(this.dialogBox).to({y:stageH},800,egret.Ease.sineIn).call(function(){GG.removeDisplayObject(t)},this);break;case"left":egret.Tween.get(this.block).to({alpha:0},400),egret.Tween.get(this.dialogBox).to({x:-e},800,egret.Ease.sineIn).call(function(){GG.removeDisplayObject(t)},this);break;case"right":egret.Tween.get(this.block).to({alpha:0},400),egret.Tween.get(this.dialogBox).to({x:stageW},800,egret.Ease.sineIn).call(function(){GG.removeDisplayObject(t)},this);break;case"center":egret.Tween.get(this.block).to({alpha:0},400),egret.Tween.get(this.dialogBox).to({scaleX:0,scaleY:0},600,egret.Ease.quintOut).call(function(){GG.removeDisplayObject(t)},this);break;case"alpha":egret.Tween.get(this.block).to({alpha:0},400),egret.Tween.get(this.dialogBox).to({alpha:0},400).call(function(){GG.removeDisplayObject(t)},this)}}else GG.removeDisplayObject(this)},e}(egret.DisplayObjectContainer);__reflect(Dialog.prototype,"Dialog");var DialogAniType;!function(t){t.top="top",t.bottom="bottom",t.left="left",t.right="right",t.center="center",t.alpha="alpha",t.none="none"}(DialogAniType||(DialogAniType={}));var GPage=function(t){function e(e){var n=t.call(this)||this;return n._cache=e,n.addEventListener(egret.Event.ADDED_TO_STAGE,n.onAdded,n),n.addEventListener(egret.Event.REMOVED_FROM_STAGE,n.onRemove,n),n.onCreate(),n}return __extends(e,t),Object.defineProperty(e.prototype,"cache",{get:function(){return this._cache},enumerable:!0,configurable:!0}),e.prototype.onCreate=function(){},e.prototype.onAdded=function(){},e.prototype.onStart=function(){},e.prototype.onRemove=function(){},e}(egret.DisplayObjectContainer);__reflect(GPage.prototype,"GPage");var GPageChangeHandler=function(){function t(){}return t.prototype.onChange=function(t,e,n){},t}();__reflect(GPageChangeHandler.prototype,"GPageChangeHandler");var BasePlatform=function(){function t(){}return t.prototype.setup=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.getUserInfo=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.login=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.share=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.jdMiNiShare=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.loginToJD=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.updateShareConfig=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.addCar=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.openCar=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t}();__reflect(BasePlatform.prototype,"BasePlatform",["Platform"]);var Gloading=function(t){function e(){var e=t.call(this)||this;return e.onCreate(),e.addEventListener(egret.Event.ADDED_TO_STAGE,e._onAdded,e),e}return __extends(e,t),e.prototype._onAdded=function(){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this._onAdded,this),this.onAdded()},e.prototype.onCreate=function(){},e.prototype.onAdded=function(){},e.prototype.onResLoaded=function(){},e.prototype.onProgress=function(t,e){},e.prototype.onComplete=function(){},e}(egret.DisplayObjectContainer);__reflect(Gloading.prototype,"Gloading");var WEB;!function(t){function e(){var t=navigator.userAgent.toString(),e=t.match(/MicroMessenger/i);return"MicroMessenger"==e?(console.log("微信"),!0):!1}function n(){var t=navigator.userAgent.toString(),e=t.match(/Alipay/i);return"Alipay"==e?(console.log("支付宝"),!0):!1}function i(){var t=navigator.userAgent.toString(),e=t.match(/Xinhuashe/i);return"Xinhuashe"==e?(console.log("新华社"),!0):!1}function o(){var t=navigator.userAgent.toString(),e=t.match(/jdapp/i);return"jdapp"==e?(console.log("京东"),!0):!1}function r(){var t=navigator.userAgent.toString(),e=t.match(/Weibo/i);return"Weibo"==e?(console.log("微博"),!0):!1}function s(){var t=navigator.userAgent.toString(),e=t.match(/oppocommunity/i);return"oppocommunity"==e?(console.log("OPPO+"),!0):!1}function a(){var t=navigator.userAgent.toString(),e=t.match(/AliApp/i),n=t.match(/TB/i);return"AliApp"==e&&"TB"==n?(console.log("淘宝"),!0):!1}function c(){var t=navigator.userAgent.toString(),e=t.match(/AliApp/i),n=t.match(/TM/i);return"AliApp"==e&&"TM"==n?(console.log("天猫"),!0):!1}function h(){var t=navigator.userAgent.toString(),e=!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);return e}function l(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),n=window.location.search.substr(1).match(e);return null!=n?decodeURI(n[2]):null}function u(t){return t&&""!=t?/^[1][3,4,5,6,7,8,9][0-9]{9}$/.test(t):!1}function d(t){return window.h5_cfg[t]}function p(t){window.location.href=t}function g(t){window.location.replace(t)}function f(t){document.title=t}function _(t,e){window.localStorage.setItem(t,e)}function m(t){var e=window.localStorage.getItem(t);return e?e:""}function v(t){window.open("tel:"+t,"_self")}function w(t){window.open("sms:"+t,"_self")}function y(t){var e=navigator.userAgent.indexOf(t);return e>=0?!0:!1}function E(){t.OrientationEvt=new egret.EventDispatcher;var e=new egret.DeviceOrientation;e.addEventListener(egret.Event.CHANGE,b,this),e.start()}function b(e){e.beta>20&&e.beta<160||e.beta>-160&&e.beta<-20?t.isLandscape&&(t.isLandscape=!1,t.OrientationEvt.dispatchEventWith(t.PORTRAIT)):t.isLandscape||(t.isLandscape=!0,t.OrientationEvt.dispatchEventWith(t.LANDSCAPE))}function T(t,e,n,i,o){var r=egret.MainContext.instance.stage.$screen.canvas,s=Number(r.style.top.substr(0,r.style.top.length-2)),a=document.createElement("div");a.style.width=GG.egretToPx(i)+"px",a.style.height=GG.egretToPx(o)+"px",a.style.position="absolute",a.style.top=GG.egretToPx(n)+s+"px",a.style.left=GG.egretToPx(e)+"px",a.id="wxOpenInAPP",document.body.appendChild(a);var c="gh_21157de26c91";a.innerHTML='\n        <wx-open-launch-weapp\n        id="launch-btn"\n        username="'+c+'"\n        path="pages/bind/main.html">\n            <template>\n                <style>\n                    .btn {\n                        width: '+GG.egretToPx(i)+"px; \n                        height: "+GG.egretToPx(o)+'px; \n                        border: 0;\n                        outline:none;\n                        border-radius: 1px; \n                        color:cornflowerblue;\n                        background: transparent;\n                        -webkit-background: transparent;\n                        -webkit-touch-callout: none;\n                    }\n                </style>\n                <button class="btn">\n                </button>\n            </template>\n        </wx-open-launch-weapp>\n        <img src=\''+t+"' style='position:absolute;top: 0;left: 0;width:"+GG.egretToPx(i)+"px;height: "+GG.egretToPx(o)+"px;pointer-events: none;-webkit-touch-callout: none;'>\n        </img>\n       ";var h=document.getElementById("launch-btn");return h.addEventListener("launch",function(t){console.log("miniprogram launch success")}),h.addEventListener("error",function(t){console.log("miniprogram luanch fail",t.detail)}),a}t.isWeiXin=e,t.isAlipay=n,t.isXinhuashe=i,t.isJD=o,t.isWeibo=r,t.isOppo=s,t.isTB=a,t.isTM=c,t.isiOS=h,t.getURLParams=l,t.isPhone=u,t.getVar=d,t.navigateToURL=p,t.replaceToURL=g,t.setHtmlTitle=f,t.setStorage=_,t.getStorage=m,t.callPhone=v,t.sendMessage=w,t.checkUserAgent=y,t.setupOrientation=E,t.createMiniGameBtn=T,t.isLandscape=!1,t.PORTRAIT="portrait",t.LANDSCAPE="landscape"}(WEB||(WEB={}));var Gloader=function(t){function e(){var e=t.call(this)||this;return e.RES_LOADING="loading",e.RES_PRELOAD="preload",e.respath="",e}return __extends(e,t),e.prototype.setRespath=function(t){this.respath=t},e.prototype.start=function(t,e,n,i){void 0===n&&(n="loading"),void 0===i&&(i="preload"),this.RES_LOADING=n,this.RES_PRELOAD=i,this.loadingView=e,RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig(t+"?"+GG.randomInt(1e3,9999),this.respath)},e.prototype.onReady=function(t,e){this.readyCall=t,this.callRef=e},e.prototype.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),""!=this.RES_LOADING?RES.loadGroup(this.RES_LOADING):RES.loadGroup(this.RES_PRELOAD)},e.prototype.onResourceLoadComplete=function(t){t.groupName==this.RES_PRELOAD?(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),this.loadingView=null,this.readyCall&&(this.readyCall.call(this.callRef),this.readyCall=null,this.callRef=null)):t.groupName==this.RES_LOADING&&(this.loadingView.onResLoaded(),RES.loadGroup(this.RES_PRELOAD))},e.prototype.onResourceLoadError=function(t){this.onResourceLoadComplete(t)},e.prototype.onResourceProgress=function(t){this.loadingView&&t.groupName==this.RES_PRELOAD&&this.loadingView.onProgress(t.itemsLoaded,t.itemsTotal)},e}(egret.EventDispatcher);__reflect(Gloader.prototype,"Gloader");var MusicBtn=function(t){function e(e,n,i){void 0===e&&(e=!1),void 0===n&&(n="music_on_png"),void 0===i&&(i="music_off_png");var o=t.call(this)||this;o.is_on=GV.IS_ON,o.is_tween=e,o.onName=n,o.offName=i;var r=GG.newBitmap(o.is_on?o.onName:o.offName,o);return r.touchEnabled=!0,o.btn=r,o.btn.addEventListener(egret.TouchEvent.TOUCH_TAP,o.change,o),stage.addEventListener("change_music_status",o.change,o),o.is_on&&o.is_tween&&(GG.setAnchor(o),egret.Tween.get(o,{loop:!0}).to({rotation:360},5e3)),o.hiddenProperty="hidden"in document?"hidden":"webkitHidden"in document?"webkitHidden":"mozHidden"in document?"mozHidden":null,o.visibilityChangeEvent=o.hiddenProperty.replace(/hidden/i,"visibilitychange"),document.addEventListener(o.visibilityChangeEvent,o.onVisibilityHide.bind(o)),o.once(egret.Event.REMOVED_FROM_STAGE,function(){o.destroy(),document.removeEventListener(o.visibilityChangeEvent,o.onVisibilityHide.bind(o))},o),o}return __extends(e,t),Object.defineProperty(e.prototype,"isOn",{get:function(){return this.is_on},enumerable:!0,configurable:!0}),e.prototype.change=function(){var t=this;this.btn.touchEnabled=!1,setTimeout(function(){t.btn.touchEnabled=!0},310),this.btn.texture=this.is_on?RES.getRes(this.offName):RES.getRes(this.onName),this.is_on?(GG.Audio.muteMusic(!0),this.is_tween&&(egret.Tween.removeTweens(this),this.rotation=0)):(GG.Audio.muteMusic(!1),this.is_tween&&egret.Tween.get(this,{loop:!0}).to({rotation:360},5e3)),GV.IS_ON=this.is_on=!this.is_on},e.prototype.setRes=function(t,e){this.onName=t,this.offName=e,this.btn.texture=this.is_on?RES.getRes(this.onName):RES.getRes(this.offName)},e.prototype.restore=function(){this.onName="music_on_png",this.offName="music_off_png",this.btn.texture=this.is_on?RES.getRes(this.onName):RES.getRes(this.offName)},e.prototype.destroy=function(){this.btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.change,this),stage.removeEventListener("change_music_status",this.change,this)},e.prototype.onVisibilityHide=function(){document[this.hiddenProperty]?GG.Audio.muteMusic(!0):GG.Audio.muteMusic(0==this.is_on)},e}(egret.DisplayObjectContainer);__reflect(MusicBtn.prototype,"MusicBtn");var ChangeGameScene=function(t){function e(){return t.call(this,!0,DialogAniType.alpha,!0)||this}return __extends(e,t),e.prototype.create=function(){var t=this;this.curId=GV.gameInfo.sceneId,this.dialogBox.width=614,this.dialogBox.height=586;for(var e=(GG.newBitmap("dialog_title_change_png",this.dialogBox,307,0,!0,.5,0),[{img:"",desc:"母婴&玩具场景",id:1},{img:"",desc:"食品&酒水场景",id:2},{img:"",desc:"个护&清洁场景",id:3}]),n=0,i=e;n<i.length;n++){var o=i[n],r=GG.newBitmap("dialog_scece"+o.id+"_png",this.dialogBox,219*(o.id-1),122);r.name="scene_"+o.id,r.touchEnabled=!0,r.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onItemClick,this),this["box"+o.id]=r}this.select=GG.newBitmap("dialog_scece_select_png",this.dialogBox,-12+219*(this.curId-1),108),this.btn=GG.newGbutton("dialog_confirm_png",this.dialogBox,!0),this.btn.x=307,this.btn.y=550,this.btn.onTap(function(){t.onConfirm()})},e.prototype.onItemClick=function(t){var e=t.target,n=parseInt(e.name.split("_")[1]);n!=this.curId&&(this.curId=n,egret.Tween.removeTweens(this.select),egret.Tween.get(this.select).to({x:-12+219*(this.curId-1)},200,egret.Ease.circInOut))},e.prototype.onConfirm=function(){stage.dispatchEventWith(GameEvtType.CHANGESCENE,!1,this.curId),this.cancel();for(var t=0;3>t;t++){var e=this["box"+(t+1)];e.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onItemClick,this)}},e}(Dialog);__reflect(ChangeGameScene.prototype,"ChangeGameScene");var GV=function(){function t(){}return t.sendPrize=function(e){return new Promise(function(n){function i(){return s>=r-1?void n(e):(s++,void o())}function o(){var n=e[s];n||i(),t.formatPrize(n),"2"==n.type||"jbean"==n.type?JDtool.sendBean(n.remark,n.num,n.lz_id).then(function(t){n.state=!0,i()})["catch"](function(t){i()}):"3"==n.type||"coupon"==n.type?JDtool.sendCoupon(n.remark,n.lz_id).then(function(t){n.state=!0,i()})["catch"](function(t){i()}):i()}console.log("待发放奖励列表",e);var r=e.length,s=0;o()})},t.formatPrize=function(e){switch(e.type){case"large_circle":e.left="紧箍圈：",e.right=e.num+"个",e.icon="ferrule_2_png",void 0!=e.current_num&&(t.gameInfo.ferrule[2].num=e.current_num);break;case"must_circle":e.left="乾坤圈：",e.right=e.num+"个",e.icon="ferrule_3_png",void 0!=e.current_num&&(t.gameInfo.ferrule[3].num=e.current_num);break;case"game_num":e.left="游戏次数：",e.right=e.num+"次",e.icon="game_png",void 0!=e.current_num&&(t.gameInfo.gameNum=e.current_num);break;case"special_effects":e.left="分享特效：",e.right=e.name;break;case"integral":e.left="积分：",e.right=e.num+"分",e.icon="integral_png",void 0!=e.current_num&&(t.gameInfo.score=e.current_num);break;case"treasure_chest":e.left="开箱次数：",e.right=e.num+"次",e.icon="bao_png",void 0!=e.current_num&&(t.gameInfo.openNum=e.current_num);break;case"jbean":e.left="京豆：",e.right="X "+e.num,e.icon="jbean_png";break;case"coupon":e.left=e.name,e.right="",e.icon="coupon_png";break;case"entity":e.left=e.name,e.right="",e.icon="entity_png"}},t.dispatch3DEvent=function(t,e){window.EventBridge.trigger(t,e)},t.add3DEventListener=function(t,e,n){window.EventBridge.on(t,function(t){e&&e.call(n,t)})},t.assign=function(t,e){for(var n in e)t[n]=e[n]},t.BDTJ=function(t,e){void 0===e&&(e="Event"),window._hmt&&(window._hmt.push(["_trackEvent",t,e]),console.log("_hmt",window._hmt,t,e)),window.LH&&window.LH.push(["rpEvent",[t,e]])},t.LHTJ=function(t,e){window.LH&&window.LH.push(["rpEvent",[t,e]])},t.LHPage=function(t,e){window.LH&&window.LH.push(["rpPage",[t,e]])},t.JDTJ=function(t,e){if(window.MPing)try{var n=new window.MPing.inputs.Click(t);n.event_param="00930754_"+e,n.updateEventSeries();var i=new window.MPing;i.send(n)}catch(o){}},t.initTouchLayer=function(){var t=new egret.Shape;t.graphics.beginFill(0),t.graphics.drawRect(0,0,stageW,stageH),t.graphics.endFill(),t.alpha=0,t.touchEnabled=!0,window.touchLayer=t},t.addTouchLayer=function(t){window.touchLayer&&(window.touchLayer.parent&&window.touchLayer.parent.removeChild(window.touchLayer),t&&t.addChild(window.touchLayer))},t.IS_ON=!1,t.RPC_APPID="jd_ar_supermarket",t.RPC_TOKEN="8Hi8e2HHbg103k",t.baseResUrl="https://storage.360buyimg.com/taoquan/static/plugin/",t.isMini=!1,t.miniScale=1,t.isLaunch=!1,t.isGuide=WEB.getStorage("guide"),t.isQuickStart=WEB.getStorage("quick"),t.tipNoGameNum=!1,t.shareKey="",t.vfxKey="",t.friendName="",t.personal_idx=0,t.userInfo={name:"",headUrl:"",shareKey:""},t.userId="",t.newPrizeInfo=[],t.dayPrizeInfo=[],t.shareInfo=[],t.rankAward=null,t.gameInfo={id:"",rank:999,score:350,sceneId:1,gameNum:999,remaining:999,openNum:5,time:30,scene_list:[],ferrule:{1:{name:"地摊圈",num:999,id:1},2:{name:"紧箍圈",num:999,id:2},3:{name:"乾坤圈",num:999,id:3}}},t.scenceLoadState={1:!1,2:!1,3:!1},t.modelConfig={},t.gameResultInfo={model:[],prize:[]},t.myPrizeCfg={1:{icon:"entity_png",desc:"奖品将于活动结束后15\n工作日内寄出"},2:{icon:"jbean_png",desc:"48小时内发放至京东账户上"},3:{icon:"coupon_png",desc:"48小时内发放至京东账户上"},4:{icon:"jbean_png",desc:"需手动点击领取\n领取后48小时内发放至京东账户上"}},t.quickStart_url=null,t.ruleCfg=null,t}();__reflect(GV.prototype,"GV");var GameEvtType;!function(t){t.SHOWLOADUI="show_loadui",t.LOADOVER="load_over",t.CHANGESCENE="game_changescene",t.CHANGEFERRULE="game_ferrule",t.RESUMETIME="game_resumeTime",t.EXITGAME="game_exit",t.LZSUCCEED="lz_succeed",t.LZCANCEL="lz_cancel",t.BACKRESULT="back_result",t.SHAREFINISH="share_finish",t.MEETFINISH="meet_finish",t.VIEWFINISH="view_finish",t.ADDFINISH="add_finish"}(GameEvtType||(GameEvtType={}));var ThreeEventConst;!function(t){t.LOAD_PROGRESS_CHANGE="load_progress_change",t.POWER_CHANGE="power_change",t.SHOOT="shoot",t.SHOOT_RESULT="shoot_result",t.SCENE_LOAD_END="scene_load_end",t.LOAD_3D="load_3d",t.HIDE_3D="hide_3d",t.SHOW_3D="show_3d",t.SCENE_LOAD_3D="scene_load_3d",t.CHANGE_FERRULE="change_ferrule",t.CHANGE_SCENE="change_scene",t.AWAKE="awake",t.FORCE_STOP="force_stop",t.LOCK="lock",t.UNLOCK="unlock",t.REFRESH_PRODUCTS="refresh_products"}(ThreeEventConst||(ThreeEventConst={}));var JDMp_type;!function(t){t.MarProdetail="Babel_dev_adv_MarProdetail",t.MarAddtocart="Babel_dev_adv_MarAddtocart",t.MarHotpoint="Babel_dev_adv_MarHotpoint",t.MarActivity="Babel_dev_adv_MarActivity",t.MarShop="Babel_dev_adv_MarShop",t.MarCoupon="Babel_dev_adv_MarCoupon",t.MarShare="Babel_dev_adv_MarShare"}(JDMp_type||(JDMp_type={}));var base64Res={},ErrorPage=function(t){function e(){return t.call(this,!1)||this}return __extends(e,t),e.prototype.onCreate=function(){var t=RES.getGroupByName("error");this.list={};for(var e=0,n=t;e<n.length;e++){var i=n[e];this.list[i.name]=i}var o=GG.newBitmap("error_bg_jpg",this);RES.getResByUrl(this.list.error_bg_jpg.root+this.list.error_bg_jpg.url,function(t){o.texture=t},this);var r=GG.newNavBack(topC);r.onTap(function(){JDtool.go2Back(),JDtool.go2Back()}),RES.getResByUrl(this.list.back_png.root+this.list.back_png.url,function(t){r.texture=t},this)},e.prototype.onAdded=function(){},e.prototype.onStart=function(){dialog.addChild(this)},e.prototype.showError=function(t){var e="err_"+t+"_png",n=GG.newBitmap(e,this,stageHalfW,stageHalfH,!0);RES.getResByUrl(this.list[e].root+this.list[e].url,function(t){n.texture=t,GG.setAnchor(n),n.x=stageHalfW,n.y=stageHalfH},this)},e.prototype.showRisk=function(){var t=GG.newBitmap("arload_risk_png",stage,stageHalfW,stageHalfH,!0);RES.getResByUrl(this.list.arload_risk_png.root+this.list.arload_risk_png.url,function(e){t.texture=e,GG.setAnchor(t),t.x=stageHalfW,t.y=stageHalfH},this)},e.prototype.onRemove=function(){},e}(GPage);__reflect(ErrorPage.prototype,"ErrorPage");var GamePage=function(t){function e(){var e=t.call(this,!1)||this;return e.maxTime=3e4,e.lastFerruleIndex=1,e.ferruleIndex=1,e.isGameOver=!1,e.afterIndex=0,e.clipPlayOver=!1,e.lastSceneID=null,e.changeSceneTimer=null,e}return __extends(e,t),e.prototype.onCreate=function(){},e.prototype.onAdded=function(){var t=this;if(this.maxGameNum=GV.gameInfo.remaining,GV.addTouchLayer(this),this.uiBox=new egret.DisplayObjectContainer,this.addChild(this.uiBox),this.uiBox.y=-1*GG.getCanvasStartPoint().y,this.isCLip=WEB.getVar("clip"),this.isCLip){this.clip=new ClipPlayer(!0),dialog.addChild(this.clip),this.clip.addEventListener(ClipPlayer.IMAGES_PLAY_OVER,this.onClipEnd,this),this.bombClipNameList=[],this.confettiClipNameList=[];for(var e=0;21>e;e++)this.bombClipNameList.push("bomb_"+e+"_png");for(var e=0;28>e;e++)this.confettiClipNameList.push("confetti_"+e+"_png")}this.change_btn=GG.newGbutton("btn_change_scene_png",this.uiBox,!0),this.change_btn.x=652,this.change_btn.y=1400,this.change_btn.onTap(function(){t.changeScene()}),this.ferruleList=[null];for(var n=function(e){var n=new FerruleItem("ferrule_"+e+"_0_png",GV.gameInfo.ferrule[e].num,i.uiBox,"ferrule"+GV.gameInfo.sceneId+"_"+e+"_1_png");n.x=360+(n.width+28)*(e-1),n.y=1485,n.name="q_"+e,1==e&&(n.select(),i.lastItem=n),n.touchEnabled=!0,n.addEventListener(egret.TouchEvent.TOUCH_TAP,i.onItemClick,i),n.once(egret.Event.REMOVED_FROM_STAGE,function(){n.removeEventListener(egret.TouchEvent.TOUCH_TAP,t.onItemClick,t)},i),i.ferruleList[e]=n},i=this,e=1;4>e;e++)n(e);this.barBox=new egret.DisplayObjectContainer,this.uiBox.addChild(this.barBox),this.barBox.x=125,this.barBox.y=1306,GG.newBitmap("game_bar_bg_png",this.barBox);var o=GG.newBitmap("game_bar_bar_png",this.barBox,5,4);this.bar=GG.newBitmap("game_bar_bar_png",this.barBox,5,4),this.bar.mask=o,this.bar.y=225,this.barTag=GG.newBitmap("game_bar_tag_png",this.barBox,2,48);var r=GG.newRoundRect(28,225,0,14,this.barBox);r.x=2,r.y=2,this.barTag.mask=r,this.barTag.visible=!1;var s=new egret.DisplayObjectContainer;this.barBox.addChild(s),s.x=0,s.y=0,this.barBox.visible=!1;var a=GG.newBitmap("game_bar_stripe_png",s,0,229),c=GG.newBitmap("game_bar_stripe_png",s,0,229);egret.Tween.get(a,{loop:!0}).to({y:-229},4e3),setTimeout(function(){egret.Tween.get(c,{loop:!0}).to({y:-229},4e3)},2e3),this.stripe1=a,this.stripe2=c,this.barT=GG.newBitmap("game_bar_bar_png",this.barBox,5,225,!0,0,1),this.barT.alpha=0,s.mask=this.barT,this.longPress=GG.newBitmap("longpress_tip_png",this.uiBox,416,1362),egret.Tween.get(this.longPress,{loop:!0}).to({x:402,y:1376},800,egret.Ease.sineInOut).wait(500).to({x:416,y:1362},800,egret.Ease.sineInOut),this.tipsBox=new egret.DisplayObjectContainer,this.uiBox.addChild(this.tipsBox),this.tipsBox.x=189,this.tipsBox.y=1265,this.tipsBox.visible=!1;var h=GG.newBitmap("guide_two_hand_png",this.tipsBox,50.5,57,!0);h.rotation=180,GG.newBitmap("game_ferrule3_tips_png",this.tipsBox,128,33)},e.prototype.onStart=function(){GG.clearPageList(),GV.add3DEventListener(ThreeEventConst.POWER_CHANGE,this.onPowerChange,this),GV.add3DEventListener(ThreeEventConst.SHOOT,this.onShoot,this),GV.add3DEventListener(ThreeEventConst.SHOOT_RESULT,this.onShootResult,this),GV.BDTJ("套圈游戏页")},e.prototype.onRemove=function(){this.isCLip&&GG.removeDisplayObject(this.clip),egret.Tween.removeTweens(this.stripe1),egret.Tween.removeTweens(this.stripe2),egret.Tween.removeTweens(this.longPress),GV.add3DEventListener(ThreeEventConst.POWER_CHANGE,null,this),GV.add3DEventListener(ThreeEventConst.SHOOT,null,this),GV.add3DEventListener(ThreeEventConst.SHOOT_RESULT,null,this)},e.prototype.onUpdate=function(){var t=this.maxTime-100*this.timer.currentCount;this.timeTxt.text=this.formatting(t),GG.setAnchor(this.timeTxt),this.timeTxt.x=652,this.timeTxt.y=1351},e.prototype.onComplete=function(){this.isGameOver=!0,this.isCLip?this.clipPlayOver=1!=this.clip.alpha:this.clipPlayOver=!0,this.gameOver()},e.prototype.onPowerChange=function(t){if(t){0==this.barBox.visible&&(this.barBox.alpha=0,this.barBox.visible=!0,egret.Tween.removeTweens(this.barBox),egret.Tween.get(this.barBox).to({alpha:1},33),egret.Tween.get(this.longPress).to({alpha:0},33));var e=t.power;this.tagPower=e;var n=4+221*(1-e);egret.Tween.removeTweens(this.bar),egret.Tween.get(this.bar).to({y:n},33),this.barT.scaleY=e}},e.prototype.onClipEnd=function(){this.clip.alpha=0},e.prototype.onShoot=function(){var t=this;egret.Tween.removeTweens(this.bar),this.bar.y=225,this.barT.scaleY=0,this.touchEnabled=this.touchChildren=!1,egret.Tween.get(this.uiBox).to({alpha:0},200).call(function(){t.barBox.visible=!1,t.longPress.alpha=3!=t.ferruleIndex?1:0})},e.prototype.onShootResult=function(t){var e=this;GV.gameInfo.remaining--,GV.gameInfo.remaining<=0&&(this.isGameOver=!0),console.log("data",t);var n=t.mId||"";""!=n?(this.barTag.visible=!1,GV.gameResultInfo.model.push(n),t.name&&t.name.indexOf("bomb")>-1?(GG.Audio.playSFX("bomb_mp3"),this.isCLip&&(this.clip.startLoad(this.bombClipNameList,18,!1),this.clip.alpha=1)):(GG.Audio.playSFX("win_mp3"),this.isCLip&&(this.clip.startLoad(this.confettiClipNameList,24,!1),this.clip.alpha=1))):(this.barTag.y=4+225*(1-this.tagPower),this.barTag.visible=!0),this.updateFerrule(),0==this.isGameOver?egret.Tween.get(this.uiBox).wait(700).to({alpha:1},200).call(function(){e.touchEnabled=e.touchChildren=!0},this):setTimeout(function(){e.gameOver()},900)},e.prototype.updateFerrule=function(){GV.gameInfo.ferrule[this.ferruleIndex].num--,this.ferruleList[this.ferruleIndex].changeNum(GV.gameInfo.ferrule[this.ferruleIndex].num),this.lastFerruleIndex=this.ferruleIndex,GV.gameInfo.ferrule[this.ferruleIndex].num<=0&&1!=this.ferruleIndex&&(this.ferruleIndex=1,GV.dispatch3DEvent(ThreeEventConst.CHANGE_FERRULE,{type:this.ferruleIndex-1}),this.lastItem.recover(),this.ferruleList[1].select(),this.lastItem=this.ferruleList[1],this.longPress.alpha=3!=this.ferruleIndex?1:0,this.tipsBox.visible=3==this.ferruleIndex)},e.prototype.gameOver=function(){var t=this;GV.dispatch3DEvent(ThreeEventConst.FORCE_STOP,null),egret.Tween.get(this.uiBox).to({alpha:0},200).call(function(){t.barBox.visible=!1})},e.prototype.onItemClick=function(t){var e=t.target;if(e.name!=this.lastItem.name){var n=parseInt(e.name.split("_")[1]);if(GV.gameInfo.ferrule[n].num<=0)return void RPCtip.GET.showToast("没有该套圈");this.ferruleIndex=n,this.lastFerruleIndex=n,GV.dispatch3DEvent(ThreeEventConst.CHANGE_FERRULE,{type:this.ferruleIndex-1}),this.lastItem.recover(),e.select(),this.lastItem=e,this.barBox.visible=this.barBox.visible?3!=this.ferruleIndex:!1,this.longPress.alpha=3!=this.ferruleIndex?1:0,this.tipsBox.visible=3==this.ferruleIndex}},e.prototype.showBomb=function(){},e.prototype.showConfetti=function(){},e.prototype.formatting=function(t){var e="",n=Math.floor(t/1e3);return e+=n>9?n:"0"+n,e+"s"},e.prototype.changeScene=function(){stage.addEventListener(GameEvtType.CHANGESCENE,this.onChangeScene,this),GG.showDialog(ChangeGameScene)},e.prototype.onChangeScene=function(t){stage.removeEventListener(GameEvtType.CHANGESCENE,this.onChangeScene,this);var e=t.data||GV.gameInfo.sceneId;e!=GV.gameInfo.sceneId&&(this.lastSceneID=GV.gameInfo.sceneId,GV.gameInfo.sceneId=e,GV.scenceLoadState[e]?this.onScenceLoaded():(GV.add3DEventListener(ThreeEventConst.SCENE_LOAD_END,this.onScenceLoaded,this),RPCtip.GET.showToastImg("场景加载中"),GV.dispatch3DEvent(ThreeEventConst.SCENE_LOAD_3D,{scene:GV.gameInfo.sceneId})))
},e.prototype.onScenceLoaded=function(){clearTimeout(this.changeSceneTimer),GV.add3DEventListener(ThreeEventConst.SCENE_LOAD_END,null,this),GV.scenceLoadState[GV.gameInfo.sceneId]=!0,GV.dispatch3DEvent(ThreeEventConst.CHANGE_SCENE,{scene_id:GV.gameInfo.sceneId}),GV.dispatch3DEvent(ThreeEventConst.REFRESH_PRODUCTS,[]),RPCtip.GET.hideTip()},e}(GPage);__reflect(GamePage.prototype,"GamePage");var HomePage=function(t){function e(){return t.call(this,!1)||this}return __extends(e,t),e.prototype.onCreate=function(){},e.prototype.onAdded=function(){var t=this;this.start_btn=GG.newGboxButton("btn_game_start_png",this,!0,null,"btn_game_start_over_png"),this.start_btn.x=stageHalfW,this.start_btn.y=1448-GG.getCanvasStartPoint().y,this.start_btn.btnName=GG.newBitmap("btn_game_label_png",this.start_btn,this.start_btn.width/2,10,!0,.5,0),this.start_btn.btnDesc=GG.newBitmapText(this.start_btn,"game_num","center"),this.start_btn.btnDesc.width=this.start_btn.width,this.start_btn.btnDesc.y=66,this.changeGameStartBtnDesc(),this.start_btn.onTap(function(){t.gameStart()}),this.start_btn.onTapDown(function(){t.start_btn.y=1448-GG.getCanvasStartPoint().y+4}),this.start_btn.onTapUp(function(){t.start_btn.y=1448-GG.getCanvasStartPoint().y-4})},e.prototype.onStart=function(){GG.clearPageList(),GV.isLaunch||(GV.isLaunch=!0)},e.prototype.onRemove=function(){},e.prototype.changeGameStartBtnDesc=function(){this.start_btn.btnDesc.text="A X "+GV.gameInfo.gameNum,GV.gameInfo.gameNum<=0&&this.start_btn.setDisableRes()},e.prototype.hideBtn=function(){this.start_btn.alpha=0},e.prototype.gameStart=function(){this.hideBtn(),GV.dispatch3DEvent(ThreeEventConst.AWAKE,{remaining:GV.gameInfo.remaining}),GV.dispatch3DEvent(ThreeEventConst.REFRESH_PRODUCTS,[]),GV.gameResultInfo.model.length=0,GV.gameResultInfo.prize.length=0,GG.showPage(GamePage)},e}(GPage);__reflect(HomePage.prototype,"HomePage");var LtRHander=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.onChange=function(t,e,n){t.x=-stageW,egret.Tween.get(e).to({x:stageW},300),egret.Tween.get(t).to({x:0},300).call(function(){n()})},e}(GPageChangeHandler);__reflect(LtRHander.prototype,"LtRHander");var PlatformInit;!function(t){function e(){WEB.isWeiXin()?(GG.Platform=new WechatPlatform,n()):WEB.isJD()?(GG.Platform=new JdPlatform,i()):WEB.isWeibo()?(GG.Platform=new WeiboPlatform,o()):WEB.isTB()||WEB.isTM()?(GG.Platform=new TbPlatform,r()):WEB.isOppo()?(GG.Platform=new OppoPlusPlatform,s()):GG.Platform=new WebPlatform}function n(){var t=-1==window.location.href.indexOf("isvjcloud.com")?"https://api.ssl.jimingkeji.com.cn/wechat/?service=Share.index&wechat_type=jm_prod":"https://p.ssl.jimingkeji.com.cn/openapi/wechat/?service=Share.index&wechat_type=jm_third";GG.Platform.setup({debug:!1,authApi:t,shareConfig:{timelineTitle:WEB.getVar("shareTitle"),timelineImgUrl:WEB.getVar("shareImg"),appMessageTitle:WEB.getVar("shareTitle"),appMessageDesc:WEB.getVar("shareDesc"),appMessageImgUrl:WEB.getVar("shareImg")}})}function i(){GG.Platform.setup({cb:function(){console.log("京东环境加载成功")}})}function o(){}function r(){}function s(){GG.Platform.setup({debug:!1,shareConfig:{title:WEB.getVar("shareTitle"),desc:WEB.getVar("shareDesc"),imageUrl:WEB.getVar("shareImg")}})}t.init=e}(PlatformInit||(PlatformInit={}));var GG;!function(t){function e(e,n){void 0===n&&(n={fps:60}),i(e),t.Audio=new Gaudio2,t.Evt=new egret.EventDispatcher,k=new Gloader}function n(t,e,n,i,o,r,s){void 0===i&&(i="loading"),void 0===o&&(o="preload"),void 0===r&&(r="resource/"),void 0===s&&(s="resource/"),k.onReady(e,n);var a=r+"default.res.json";k.setRespath(s),k.start(a,t,i,o),stage.addChild(t)}function i(t,e){void 0===e&&(e={fps:60}),main=t,stage=main.stage,(!egret.Capabilities.isMobile||navigator.userAgent.match(/ipad/gi))&&(stage.scaleMode=egret.StageScaleMode.SHOW_ALL,stage.orientation="auto",e.width&&e.height&&stage.setContentSize(e.width,e.height)),stageW=stage.stageWidth,stageH=stage.stageHeight,stageHalfW=stageW>>1,stageHalfH=stageH>>1;var n=location.href;IS_LOCALHOST=n.indexOf("http://192.")>-1?!0:!1;var i=document.querySelector(".egret-player");if(i&&(screenW=+i.getAttribute("data-content-width"),screenH=+i.getAttribute("data-content-height"),canvas=i),"Android"==egret.Capabilities.os){var o=document.documentElement.clientWidth,r=document.documentElement.clientHeight;document.body.style.width=o+"px",document.body.style.height=r+"px"}}function o(e,n){function i(){V&&"GesturePage"!=egret.getQualifiedClassName(V)&&"GamePage"!=egret.getQualifiedClassName(V)&&"VfxPage"!=egret.getQualifiedClassName(V)&&M.push({key:egret.getQualifiedClassName(V),handler:egret.getQualifiedClassName(n)}),r.onStart(),t.removeDisplayObject(V),V=r}void 0===n&&(n=null),null==H&&(H={});var o=egret.getQualifiedClassName(e),r=H[o];return r||(r=new e,r.cache&&(H[o]=r)),main.addChild(r),n&&V?n.onChange(r,V,i):i(),r}function r(){function e(){i.onStart(),t.removeDisplayObject(V),V=i}if(0==M.length){if("HomePage"==egret.getQualifiedClassName(V))return;M.push({key:"HomePage",handler:null})}var n=M.pop(),i=H[n.key];if(!i){var o=egret.getDefinitionByName(n.key);i=new o,i.cache&&(H[n.key]=i)}switch(main.addChild(i),n.handler){case"RtLHander":V?(new LtRHander).onChange(i,V,e):e();break;default:e()}}function s(){M.length=0}function a(t,e,n){void 0===e&&(e={}),void 0===n&&(n=null);var i=new t(e,n);dialog.addChild(i)}function c(){dialog.removeChildren()}function h(){var t=new egret.Point,e=window.devicePixelRatio,n=window.$(".egret-player > canvas")[1],i=n.clientWidth/e,o=n.clientHeight/e,r=Number(n.style.top.slice(0,-2)),s=Number(n.style.left.slice(0,-2));return t.x=-(stageW/i)*s,t.y=-(stageH/o)*r,t}function l(t){void 0===t&&(t=""),RES.getVirtualUrl=function(e){var n=e+"";return-1!=n.indexOf("data:")&&-1!=n.indexOf("base64")?n:(-1==n.indexOf("?")&&t.length&&(n+="?v="+t),n)}}function u(){if("Android"==egret.Capabilities.os){var t=document.documentElement.clientWidth,e=document.documentElement.clientHeight;document.body.style.width=t+"px",document.body.style.height=e+"px"}}function d(t,e,n){void 0===t&&(t=null),void 0===e&&(e=0),void 0===n&&(n=0);var i=new Gimage(e,n);return t&&t.addChild(i),i}function p(t,e,n,i,o){void 0===e&&(e=null),void 0===n&&(n=!0),void 0===i&&(i=""),void 0===o&&(o="");var r=new Gbutton(t,n,i,o);return r.touchEnabled=!0,e&&e.addChild(r),r}function g(t,e,n,i,o){void 0===e&&(e=null),void 0===n&&(n=!0),void 0===i&&(i=""),void 0===o&&(o="");var r=new GboxButton(t,n,i,o);return r.touchEnabled=!0,e&&e.addChild(r),r}function f(e,n){void 0===n&&(n="");var i=t.newGbutton(n?n:"back_png",e,!0);return i.x=t.getCanvasStartPoint().x+46,i.y=189.5,i.onTap(function(){t.backPage()}),i}function _(e,n){var i=t.newBitmap(e,n);return t.setAnchor(i),i.x=stageHalfW,i.y=191,i}function m(t,e,n,i){void 0===t&&(t=null),void 0===e&&(e=0),void 0===n&&(n=10),void 0===i&&(i="left");var o=new Gtext;return o.textColor=e,o.textAlign=i,o.size=n,t&&t.addChild(o),o}function v(t,e,n,i){void 0===t&&(t=null),void 0===e&&(e=0),void 0===n&&(n=10),void 0===i&&(i="left");var o=new egret.TextField;return o.size=n,o.textColor=e,o.textAlign=i,t&&t.addChild(o),o}function w(t,e,n){void 0===t&&(t=null),void 0===n&&(n="left");var i=new egret.BitmapText;return i.font=RES.getRes(e+"_fnt"),i.textAlign=n,t&&t.addChild(i),i}function y(t,e,n){void 0===n&&(n=null);var i=new egret.Shape;return i.graphics.beginFill(e),i.graphics.drawCircle(t,t,t),i.graphics.endFill(),n&&n.addChild(i),i}function E(e,n,i,o,r,s,a){void 0===e&&(e=""),void 0===n&&(n=null),void 0===i&&(i=0),void 0===o&&(o=0),void 0===r&&(r=!1),void 0===s&&(s=.5),void 0===a&&(a=.5);var c=new egret.Bitmap;if(""!=e){var h=RES.getRes(e);c.texture=h,c.name=e}return r&&t.setAnchor(c,s,a),n&&n.addChild(c),c.x=i,c.y=o,c}function b(e,n,i){void 0===i&&(i="png");for(var o=new egret.DisplayObjectContainer,r=0,s=0;n>s;s++){var a=t.newBitmap(e+"_"+s+"_"+i,o,0,r);r+=a.height}return o}function T(t){for(var e=new egret.DisplayObjectContainer,n=0,i=function(i){var o=new egret.Bitmap;e.addChild(o),o.y=n,o.height=t[i].height,n+=o.height,RES.getResByUrl(t[i].url,function(t){o.texture=t})},o=0;o<t.length;o++)i(o);return e}function C(t,e,n,i){void 0===i&&(i=null);var o=new egret.Shape;return o.graphics.beginFill(n),o.graphics.drawRect(0,0,t,e),o.graphics.endFill(),i&&i.addChild(o),o}function G(t,e,n,i,o){void 0===o&&(o=null);var r=new egret.Shape;return r.graphics.beginFill(n),r.graphics.drawRoundRect(0,0,t,e,i),r.graphics.endFill(),o&&o.addChild(r),r}function x(t,e,n){void 0===t&&(t=null),void 0===n&&(n=.8);var i=C(stageW+100,stageH,e,t);return i.x=-50,i.alpha=n,i.touchEnabled=!0,i}function S(t,e,n){void 0===e&&(e=.5),void 0===n&&(n=.5),t.anchorOffsetX=t.width*e,t.anchorOffsetY=t.height*n}function R(t){t&&t.parent&&t.parent.removeChild(t)}function A(t,e){if(t>e){var n=e;e=t,t=n}return t+Math.random()*(e-t)}function P(t,e){var n=A(t,e+1);return parseInt(n+"")}function B(t){return t[Math.random()*t.length|0]}function O(t){return.5*(stageW-screenW)+t}function L(t){return.5*(stageH-screenH)+t}function I(t,e){function n(){window.wx&&window.wx.getNetworkType({success:function(n){t.call(e)}})}var i=navigator.userAgent,o=!!i.match(/weibo/gi),r=!!i.match(/MicroMessenger/gi);if(console.log("auto isweibo:"+o),r){var s=window.WeixinJSBridge;"undefined"==typeof s?document.addEventListener&&document.addEventListener("WeixinJSBridgeReady",n,!1):n()}else o?(console.log("auto isweibo:"+o),window.WeiboJSBridge?window.WeiboJSBridge.invoke("getNetworkType",{},function(){t.call(e),console.log("auto isweibo getNetworkType:"+o)}):(t.call(e),console.log("nogetNetworkType:"+o))):t.call(e)}function D(t){var e=window.devicePixelRatio,n=window.$(".egret-player > canvas")[0].clientWidth/e,i="webgl"==egret.Capabilities.renderMode?t/(stageW/n):t*(stageW/n);return i}var k;t.setup=e,t.startup=n,t.setLayer=i;var H,V,M=[];t.showPage=o,t.backPage=r,t.clearPageList=s,t.showDialog=a,t.removeAllDialog=c,t.getCanvasStartPoint=h,t.setResVersion=l,t.setAttr=u,t.newGimage=d,t.newGbutton=p,t.newGboxButton=g,t.newNavBack=f,t.newTitle=_,t.newGtext=m,t.newText=v,t.newBitmapText=w,t.newCircle=y,t.newBitmap=E,t.newLongImage=b,t.newNetLongImage=T,t.newRect=C,t.newRoundRect=G,t.newRectBlock=x,t.setAnchor=S,t.removeDisplayObject=R,t.randomNumber=A,t.randomInt=P,t.randomArr=B,t.fixOffsetX=O,t.fixOffsetY=L,t.autoPlay=I,t.cutString=function(t,e,n){void 0===n&&(n=!1),t||(t=""),e||(e=9);for(var i=SpecialChar.toArray(t),o=0,r="",s=n===!0?"":"...",a=0,c=i;a<c.length;a++){var h=c[a];if(SpecialChar.hasUnicode(h)){if(o+=2.5,o>e)return r+s;r+=h}else if(h.charCodeAt(0)>128){if(o+=2,o>e)return r+=s;r+=h}else if(o+=1,r+=h,o>=e)return r.substring(0,r.length-2)+s}return r},t.egretToPx=D}(GG||(GG={}));var stage,stageW,stageH,stageHalfW,stageHalfH,screenW,screenH,main,dialog,topC,canvas,IS_LOCALHOST,Gaudio=function(){function t(){this.quickLock=!1}return Object.defineProperty(t.prototype,"isMuteSFX",{get:function(){return this._muteSFX},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isMuteMusic",{get:function(){return this._muteMusic},enumerable:!0,configurable:!0}),t.prototype.muteSFX=function(t){this._muteSFX=t},t.prototype.muteMusic=function(t){var e=this;this.quickLock||(this.quickLock=!0,setTimeout(function(){e.quickLock=!1},300),this._muteMusic=t,this._muteSFX=t,t?this._stopChannel():this._resumeChannel())},t.prototype.playSFX=function(t,e){if(void 0===e&&(e=!1),!this._muteSFX)if(e){if("iOS"==egret.Capabilities.os){var n=RES.getRes(t);n&&n.play(0,1)}}else{var n=RES.getRes(t);n&&n.play(0,1)}},t.prototype._stopChannel=function(){this.musicChannel&&(this.position=this.musicChannel.position,this.musicChannel.stop(),this.musicChannel=null)},t.prototype._resumeChannel=function(){this.music&&this._playMusic(this.music)},t.prototype._playMusic=function(t){this._muteMusic||(this._stopChannel(),this.music=t,this.musicChannel=t.play())},t.prototype.playMusic=function(t){var e=RES.getRes(t);this._playMusic(e)},t.prototype.playMusicURL=function(t){var e=this;this._muteMusic=!1,RES.getResByUrl(t,function(t){e._playMusic(t)},this,RES.ResourceItem.TYPE_SOUND)},t}();__reflect(Gaudio.prototype,"Gaudio");var Gaudio2=function(){function t(){this._muteSFX=!1,this._muteMusic=!1,this._volum=1,this.sfxId=0,this.sfxList={},this.quickLock=!1,window.AudioContext=window.AudioContext||window.webkitAudioContext,window.addEventListener("pageshow",function(){console.log("pageshow"),isPageHide&&(isPageHide=!1,WEB.isiOS()&&GG.Audio.rebootAudio())}),window.addEventListener("pagehide",function(){console.log("pagehide"),isPageHide=!0})}return t.prototype.muteAudio=function(t,e){var n=this;void 0===e&&(e=!0),this.quickLock||(this.quickLock=!0,setTimeout(function(){n.quickLock=!1},300),this.muteMusic(t),e&&this.muteSFX(t))},t.prototype.muteSFX=function(t){},t.prototype.muteMusic=function(t){t?this._stopChannel():this._resumeChannel()},t.prototype.setVolum=function(t,e,n){var i=this;if(void 0===e&&(e=!1),this._volum=t,this.music_source&&!this._muteMusic)if(e){var o={b:n||this.music_gain.value};egret.Tween.get(o,{onChange:function(){i._muteMusic||i.music_source&&i.music_gain.setValueAtTime(o.b,i.context.currentTime)},onChangeObj:this}).to({b:t},200)}else this.music_gain.setValueAtTime(t,this.context.currentTime)},t.prototype.playSFX=function(t){var e=this,n=RES.getRes(t).audioBuffer;if(n){var i=this.sfxId++;this.context||this.createAudio();var o=this.context.createBufferSource();this.music_gain&&o.connect(this.music_gain),o.buffer=n,o.start(0),this.sfxList[i]=o,o.onended=function(){o.onended=null,o.buffer=null,o.disconnect(e.music_gain),delete e.sfxList[i]}}},t.prototype._stopChannel=function(t){void 0===t&&(t=!1),!this._muteMusic&&this.music_gain&&this.context&&(this._muteMusic=!0,this.music_gain.gain.setValueAtTime(0,this.context.currentTime)),t&&this.music_source&&(this.music_source.stop(),this.music_source.buffer=null,this.music_source.disconnect(this.music_gain),this.music_source=null)},t.prototype._resumeChannel=function(){this._muteMusic&&this.music_gain&&this.context&&(this._muteMusic=!1,this.music_gain.gain.setValueAtTime(1,this.context.currentTime))},t.prototype.playMusic=function(e){var n=this;this._stopChannel(!0),this.music_buffer=RES.getRes(e).audioBuffer,t.isFirst?(t.isFirst=!1,GG.autoPlay(function(){n._playMusic()},this)):this._playMusic()},t.prototype._playMusic=function(){this.context||this.createAudio(),this.music_source||(this.music_source=this.context.createBufferSource()),this.music_gain=this.context.createGain(),this.music_gain.gain.setValueAtTime(this._muteMusic?0:1,this.context.currentTime),this.music_source.connect(this.music_gain),this.music_gain.connect(this.context.destination),this.music_source.buffer=this.music_buffer,this.music_source.loop=!0,this.music_source.start(0)},t.prototype.rebootAudio=function(){var t=this;this.context=null,this._stopChannel(!0),GG.autoPlay(function(){t._playMusic()},this)},t.prototype.createAudio=function(){try{this.context=new window.AudioContext}catch(t){console.log("当前设备不支持Web-Audio-API！")}},t.isFirst=!0,t}();__reflect(Gaudio2.prototype,"Gaudio2");var isPageHide=!1,md5=function(){function t(){this.hexcase=0,this.b64pad=""}return t.prototype.hex_md5=function(t){return this.rstr2hex(this.rstr_md5(this.str2rstr_utf8(t)))},t.prototype.b64_md5=function(t){return this.rstr2b64(this.rstr_md5(this.str2rstr_utf8(t)))},t.prototype.any_md5=function(t,e){return this.rstr2any(this.rstr_md5(this.str2rstr_utf8(t)),e)},t.prototype.hex_hmac_md5=function(t,e){return this.rstr2hex(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)))},t.prototype.b64_hmac_md5=function(t,e){return this.rstr2b64(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)))},t.prototype.any_hmac_md5=function(t,e,n){return this.rstr2any(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)),n)},t.prototype.md5_vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"==this.hex_md5("abc").toLowerCase()},t.prototype.rstr_md5=function(t){return this.binl2rstr(this.binl_md5(this.rstr2binl(t),8*t.length))},t.prototype.rstr_hmac_md5=function(t,e){var n=this.rstr2binl(t);n.length>16&&(n=this.binl_md5(n,8*t.length));for(var i=Array(16),o=Array(16),r=0;16>r;r++)i[r]=909522486^n[r],o[r]=1549556828^n[r];var s=this.binl_md5(i.concat(this.rstr2binl(e)),512+8*e.length);return this.binl2rstr(this.binl_md5(o.concat(s),640))},t.prototype.rstr2hex=function(t){try{this.hexcase}catch(e){this.hexcase=0}for(var n,i=this.hexcase?"0123456789ABCDEF":"0123456789abcdef",o="",r=0;r<t.length;r++)n=t.charCodeAt(r),o+=i.charAt(n>>>4&15)+i.charAt(15&n);return o},t.prototype.rstr2b64=function(t){try{this.b64pad}catch(e){this.b64pad=""}for(var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i="",o=t.length,r=0;o>r;r+=3)for(var s=t.charCodeAt(r)<<16|(o>r+1?t.charCodeAt(r+1)<<8:0)|(o>r+2?t.charCodeAt(r+2):0),a=0;4>a;a++)i+=8*r+6*a>8*t.length?this.b64pad:n.charAt(s>>>6*(3-a)&63);return i},t.prototype.rstr2any=function(t,e){var n,i,o,r,s,a=e.length,c=Array(Math.ceil(t.length/2));for(n=0;n<c.length;n++)c[n]=t.charCodeAt(2*n)<<8|t.charCodeAt(2*n+1);var h=Math.ceil(8*t.length/(Math.log(e.length)/Math.log(2))),l=Array(h);for(i=0;h>i;i++){for(s=Array(),r=0,n=0;n<c.length;n++)r=(r<<16)+c[n],o=Math.floor(r/a),r-=o*a,(s.length>0||o>0)&&(s[s.length]=o);l[i]=r,c=s}var u="";for(n=l.length-1;n>=0;n--)u+=e.charAt(l[n]);return u},t.prototype.str2rstr_utf8=function(t){for(var e,n,i="",o=-1;++o<t.length;)e=t.charCodeAt(o),n=o+1<t.length?t.charCodeAt(o+1):0,e>=55296&&56319>=e&&n>=56320&&57343>=n&&(e=65536+((1023&e)<<10)+(1023&n),o++),127>=e?i+=String.fromCharCode(e):2047>=e?i+=String.fromCharCode(192|e>>>6&31,128|63&e):65535>=e?i+=String.fromCharCode(224|e>>>12&15,128|e>>>6&63,128|63&e):2097151>=e&&(i+=String.fromCharCode(240|e>>>18&7,128|e>>>12&63,128|e>>>6&63,128|63&e));return i},t.prototype.str2rstr_utf16le=function(t){for(var e="",n=0;n<t.length;n++)e+=String.fromCharCode(255&t.charCodeAt(n),t.charCodeAt(n)>>>8&255);return e},t.prototype.str2rstr_utf16be=function(t){for(var e="",n=0;n<t.length;n++)e+=String.fromCharCode(t.charCodeAt(n)>>>8&255,255&t.charCodeAt(n));return e},t.prototype.rstr2binl=function(t){for(var e=Array(t.length>>2),n=0;n<e.length;n++)e[n]=0;for(var n=0;n<8*t.length;n+=8)e[n>>5]|=(255&t.charCodeAt(n/8))<<n%32;return e},t.prototype.binl2rstr=function(t){for(var e="",n=0;n<32*t.length;n+=8)e+=String.fromCharCode(t[n>>5]>>>n%32&255);return e},t.prototype.binl_md5=function(t,e){t[e>>5]|=128<<e%32,t[(e+64>>>9<<4)+14]=e;for(var n=1732584193,i=-271733879,o=-1732584194,r=271733878,s=0;s<t.length;s+=16){var a=n,c=i,h=o,l=r;n=this.md5_ff(n,i,o,r,t[s+0],7,-680876936),r=this.md5_ff(r,n,i,o,t[s+1],12,-389564586),o=this.md5_ff(o,r,n,i,t[s+2],17,606105819),i=this.md5_ff(i,o,r,n,t[s+3],22,-1044525330),n=this.md5_ff(n,i,o,r,t[s+4],7,-176418897),r=this.md5_ff(r,n,i,o,t[s+5],12,1200080426),o=this.md5_ff(o,r,n,i,t[s+6],17,-1473231341),i=this.md5_ff(i,o,r,n,t[s+7],22,-45705983),n=this.md5_ff(n,i,o,r,t[s+8],7,1770035416),r=this.md5_ff(r,n,i,o,t[s+9],12,-1958414417),o=this.md5_ff(o,r,n,i,t[s+10],17,-42063),i=this.md5_ff(i,o,r,n,t[s+11],22,-1990404162),n=this.md5_ff(n,i,o,r,t[s+12],7,1804603682),r=this.md5_ff(r,n,i,o,t[s+13],12,-40341101),o=this.md5_ff(o,r,n,i,t[s+14],17,-1502002290),i=this.md5_ff(i,o,r,n,t[s+15],22,1236535329),n=this.md5_gg(n,i,o,r,t[s+1],5,-165796510),r=this.md5_gg(r,n,i,o,t[s+6],9,-1069501632),o=this.md5_gg(o,r,n,i,t[s+11],14,643717713),i=this.md5_gg(i,o,r,n,t[s+0],20,-373897302),n=this.md5_gg(n,i,o,r,t[s+5],5,-701558691),r=this.md5_gg(r,n,i,o,t[s+10],9,38016083),o=this.md5_gg(o,r,n,i,t[s+15],14,-660478335),i=this.md5_gg(i,o,r,n,t[s+4],20,-405537848),n=this.md5_gg(n,i,o,r,t[s+9],5,568446438),r=this.md5_gg(r,n,i,o,t[s+14],9,-1019803690),o=this.md5_gg(o,r,n,i,t[s+3],14,-187363961),i=this.md5_gg(i,o,r,n,t[s+8],20,1163531501),n=this.md5_gg(n,i,o,r,t[s+13],5,-1444681467),r=this.md5_gg(r,n,i,o,t[s+2],9,-51403784),o=this.md5_gg(o,r,n,i,t[s+7],14,1735328473),i=this.md5_gg(i,o,r,n,t[s+12],20,-1926607734),n=this.md5_hh(n,i,o,r,t[s+5],4,-378558),r=this.md5_hh(r,n,i,o,t[s+8],11,-2022574463),o=this.md5_hh(o,r,n,i,t[s+11],16,1839030562),i=this.md5_hh(i,o,r,n,t[s+14],23,-35309556),n=this.md5_hh(n,i,o,r,t[s+1],4,-1530992060),r=this.md5_hh(r,n,i,o,t[s+4],11,1272893353),o=this.md5_hh(o,r,n,i,t[s+7],16,-155497632),i=this.md5_hh(i,o,r,n,t[s+10],23,-1094730640),n=this.md5_hh(n,i,o,r,t[s+13],4,681279174),r=this.md5_hh(r,n,i,o,t[s+0],11,-358537222),o=this.md5_hh(o,r,n,i,t[s+3],16,-722521979),i=this.md5_hh(i,o,r,n,t[s+6],23,76029189),n=this.md5_hh(n,i,o,r,t[s+9],4,-640364487),r=this.md5_hh(r,n,i,o,t[s+12],11,-421815835),o=this.md5_hh(o,r,n,i,t[s+15],16,530742520),i=this.md5_hh(i,o,r,n,t[s+2],23,-995338651),n=this.md5_ii(n,i,o,r,t[s+0],6,-198630844),r=this.md5_ii(r,n,i,o,t[s+7],10,1126891415),o=this.md5_ii(o,r,n,i,t[s+14],15,-1416354905),i=this.md5_ii(i,o,r,n,t[s+5],21,-57434055),n=this.md5_ii(n,i,o,r,t[s+12],6,1700485571),r=this.md5_ii(r,n,i,o,t[s+3],10,-1894986606),o=this.md5_ii(o,r,n,i,t[s+10],15,-1051523),i=this.md5_ii(i,o,r,n,t[s+1],21,-2054922799),n=this.md5_ii(n,i,o,r,t[s+8],6,1873313359),r=this.md5_ii(r,n,i,o,t[s+15],10,-30611744),o=this.md5_ii(o,r,n,i,t[s+6],15,-1560198380),i=this.md5_ii(i,o,r,n,t[s+13],21,1309151649),n=this.md5_ii(n,i,o,r,t[s+4],6,-145523070),r=this.md5_ii(r,n,i,o,t[s+11],10,-1120210379),o=this.md5_ii(o,r,n,i,t[s+2],15,718787259),i=this.md5_ii(i,o,r,n,t[s+9],21,-343485551),n=this.safe_add(n,a),i=this.safe_add(i,c),o=this.safe_add(o,h),r=this.safe_add(r,l)}return[n,i,o,r]},t.prototype.md5_cmn=function(t,e,n,i,o,r){return this.safe_add(this.bit_rol(this.safe_add(this.safe_add(e,t),this.safe_add(i,r)),o),n)},t.prototype.md5_ff=function(t,e,n,i,o,r,s){return this.md5_cmn(e&n|~e&i,t,e,o,r,s)},t.prototype.md5_gg=function(t,e,n,i,o,r,s){return this.md5_cmn(e&i|n&~i,t,e,o,r,s)},t.prototype.md5_hh=function(t,e,n,i,o,r,s){return this.md5_cmn(e^n^i,t,e,o,r,s)},t.prototype.md5_ii=function(t,e,n,i,o,r,s){return this.md5_cmn(n^(e|~i),t,e,o,r,s)},t.prototype.safe_add=function(t,e){var n=(65535&t)+(65535&e),i=(t>>16)+(e>>16)+(n>>16);return i<<16|65535&n},t.prototype.bit_rol=function(t,e){return t<<e|t>>>32-e},t}();__reflect(md5.prototype,"md5");var Score=function(){function t(){this._data={},this._time=egret.getTimer(),this.setValue(0)}return t.prototype.setValue=function(t){var e=t.toString()+this._time;this._data={v:e}},t.prototype.getValue=function(){var t=this._data.v,e=t.substring(0,t.length-this._time.toString().length);return parseFloat(e)},t}();__reflect(Score.prototype,"Score");var Main=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),e}return __extends(e,t),e.prototype.onAddToStage=function(t){var e=this;egret.lifecycle.addLifecycleListener(function(t){t.onUpdate=function(){}}),egret.lifecycle.onPause=function(){},egret.lifecycle.onResume=function(){},egretFixed.GET.hack(),this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),GG.setup(this),dialog=new egret.DisplayObjectContainer,dialog.name="dialog",stage.addChild(dialog),topC=new egret.DisplayObjectContainer,topC.name="topC",stage.addChild(topC),window.addEventListener("resize",function(){GG.setLayer(e)}),RES.setMaxLoadingThread(4);var n=WEB.getURLParams("debug");n?RPC.debug=!0:RPC.debug=!1,egret.ImageLoader.crossOrigin="anonymous";var i=WEB.getVar("res_ver")||"";if(GG.setResVersion(i),GV.initTouchLayer(),stage.addEventListener(GameEvtType.LOADOVER,this.startH5,this),document.documentElement.clientHeight/document.documentElement.clientWidth<=1.7){console.log("超小屏适配"),GV.isMini=!0;var o=GV.miniScale=.92;main.scaleX=main.scaleY=o,main.x=(stageW-stageW*o)/2,main.y=(stageH-stageH*o)/2+40,topC.scaleX=topC.scaleY=o,topC.x=main.x,topC.y=main.y}else if(document.documentElement.clientHeight/document.documentElement.clientWidth<=1.8){console.log("小屏适配"),GV.isMini=!0;var o=GV.miniScale=.95;main.scaleX=main.scaleY=o,main.x=(stageW-stageW*o)/2,main.y=(stageH-stageH*o)/2,topC.scaleX=topC.scaleY=o,topC.x=main.x,topC.y=main.y}var r="plugin/resource/",s=new MyLoadingUI;GG.startup(s,function(){},this,"load","preload",r,r)},e.prototype.startH5=function(){stage.removeEventListener(GameEvtType.LOADOVER,this.startH5,this),GV.dispatch3DEvent(ThreeEventConst.SHOW_3D,null),GV.dispatch3DEvent(ThreeEventConst.CHANGE_SCENE,{scene_id:GV.gameInfo.sceneId}),GV.dispatch3DEvent(ThreeEventConst.REFRESH_PRODUCTS,GV.gameInfo.scene_list.model),GG.showPage(HomePage)},e}(egret.DisplayObjectContainer);__reflect(Main.prototype,"Main");var DebugPlatform=function(){function t(){}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var ClipPlayer=function(t){function e(e){void 0===e&&(e=!1);var n=t.call(this)||this;return n.paused=null,n._isCenter=e,n.addEventListener(egret.Event.REMOVED_FROM_STAGE,n.destroy,n),n}return __extends(e,t),e.prototype.startLoad=function(t,e,n){void 0===n&&(n=!1),this.textures=[],this.imgs=t,this.loop=n,this._totalFrames=t.length,this.delay=1e3/e;var i=t[0];if(-1!=i.indexOf("."))this.index=0,this.totalLoaded=0,this.load();else{for(var o=0,r=t.length;r>o;)this.textures.push(RES.getRes(""+t[o])),o++;this.playNow()}},e.prototype.playNow=function(){this._currentFrame=0,this.startTime=egret.getTimer();var t=RES.getRes(""+this.imgs[0]);t&&(this.texture=t,this._isCenter&&(GG.setAnchor(this),this.x=stageHalfW,this.y=stageHalfH)),this.hasEventListener(egret.Event.ENTER_FRAME)||this.addEventListener(egret.Event.ENTER_FRAME,this.update,this)},e.prototype.update=function(){var t=egret.getTimer()-this.startTime,n=t/this.delay|0;if(n!=this._currentFrame){this._currentFrame=n;var i=this.textures[n];if(i)this.texture=i,this.dispatchEventWith("frame",!1,n);else{var o=RES.getRes(""+this.imgs[n]);o&&(this.texture=o)}this._isCenter&&(GG.setAnchor(this),this.x=stageHalfW,this.y=stageHalfH),n>=this._totalFrames&&(this.loop?this.startTime=egret.getTimer():this.pause(),this.dispatchEventWith(e.IMAGES_PLAY_OVER))}},e.prototype.pause=function(){this.paused=!0,this.removeEventListener(egret.Event.ENTER_FRAME,this.update,this)},e.prototype.resume=function(t){void 0===t&&(t=!0),t&&(this.startTime=egret.getTimer()),this.paused=!1,this.addEventListener(egret.Event.ENTER_FRAME,this.update,this)},e.prototype.destroy=function(){this.pause()},e.prototype.destroy2=function(){for(var t in this.textures)this.textures[t]=null},e.prototype.load=function(){if(this.index>=this.imgs.length)return void this.dispatchEventWith(e.IMAGES_ALL_LOADED);var t=0;for(this.loaded=0,this.total=0;t<e.LoadMaxOnce;){var n=this.index,i=this.imgs[n];i&&(this.loadImg(n),this.index++,this.total++),t++}},e.prototype.loadImg=function(t){var n=this,i=this.imgs[t];RES.getResByUrl(i,function(i){n.textures[t]=i,n.loaded++,n.totalLoaded++,n.dispatchEventWith(e.IMAGES_ONE_LOADED,!1,n.totalLoaded),n.loaded>=n.total&&n.load()},this,RES.ResourceItem.TYPE_IMAGE)},e.IMAGES_ALL_LOADED="images_all_loaded",e.IMAGES_ONE_LOADED="images_one_loaded",e.IMAGES_PLAY_OVER="images_play_over",e.LoadMaxOnce=5,e}(egret.Bitmap);__reflect(ClipPlayer.prototype,"ClipPlayer");var ImgHTML=function(){function t(){}return t.prototype.close=function(){this._imgDiv&&this._imgDiv.remove()},t.prototype.show=function(){this._imgDiv&&(this._imgDiv.style.display="block")},t.prototype.hide=function(){this._imgDiv&&(this._imgDiv.style.display="none")},t.prototype.showImg=function(t,e,n,i,o,r,s,a){void 0===e&&(e=0),void 0===n&&(n=0),void 0===s&&(s="0"),void 0===a&&(a="");var c=750/document.documentElement.clientWidth;if(null==this._imgDiv){var h=document.getElementById(r);null==h&&(h=document.createElement("div"),h.setAttribute("id",r));var l=document.createElement("img");l.src=t,l.style.position="absolute",h.appendChild(l),l.style.opacity=s||"0",l.style.width=i,l.style.height=o,l.style.top=GG.egretToPx(n)+"px",l.style.left=e?e/c+"px":"0",canvas.appendChild(h),this._imgDiv=h,this._imgDiv.addEventListener("touchmove",function(t){t.preventDefault()});var u=0;this._imgDiv.ontouchstart=function(){u=(new Date).getTime()},this._imgDiv.ontouchend=function(){(new Date).getTime()-u>500&&GV.BDTJ(a)}}this._imgDiv.hidden=!1},t.prototype.initImgPop=function(t,e,n,i,o,r,s){void 0===e&&(e=0),void 0===n&&(n=0),void 0===s&&(s="0");750/document.documentElement.clientWidth;if(null==this._imgDiv){var a=document.getElementById(r);null==a&&(a=document.createElement("div"),a.setAttribute("id",r));var c=document.createElement("img");c.setAttribute("id","postimg"),c.src=t,c.style.position="absolute",a.appendChild(c),c.style.opacity="1",c.style.width="100vw",c.style.minHeight="100%",c.style.transform="translate(-50%,-50%)",c.style.top="50%",c.style.left="50%",canvas.appendChild(a),a.setAttribute("onclick","aaa()"),this._imgDiv=a,this.hide(),this._imgDiv.addEventListener("touchmove",function(t){t.preventDefault()})}this._imgDiv.hidden=!1},t.prototype.getOffsetPx=function(){var t=Math.max(0,stageH-document.documentElement.clientHeight*window.devicePixelRatio);return t||0},t}();__reflect(ImgHTML.prototype,"ImgHTML");var JDtool;!function(t){function e(){n(),window.webviewVisible=function(t){0==t?(console.log("隐藏界面"),stage.dispatchEventWith(ArEvent.WINHIDDEN,!1)):1==t&&(console.log("显示界面"),stage.dispatchEventWith(ArEvent.WINSHOW,!1))}}function n(){console.log("jd serve 初始化"),L().initServe(A,R,P),B=!0}function i(){}function o(){}function r(){O().exitARFace()}function s(){O().go2Back()}function a(){return O().isApp("jd")}function c(){}function h(){}function l(t){O().openUrl(t)}function u(){if(!O().isJDLogin()){var t=WEB.getURLParams("key"),e=WEB.getURLParams("vfxkey"),n={key:t,vfxKey:e},i=WEB.getVar("shareUrl")+x(n);O().toLogin(i)}}function d(){t.pin=O().getPin(),console.log("pin",t.pin)}function p(t){O().goSkuDetails(t)}function g(t){O().goShop(t)}function f(t){return new Promise(function(e,n){O().addCart(t,function(t){0==t.errId?e(null):13==t.errId&&n(t),console.log("add suc",t)},function(t){console.log("add fail",t),n(t)})})}function _(t){void 0===t&&(t={});var e={title:WEB.getVar("shareTitle"),content:WEB.getVar("shareDesc"),url:WEB.getVar("shareUrl")+x(t),img:WEB.getVar("shareImg"),clickcallback:function(t){console.log("分享成功",t);var e=parseInt(t.shareResult);0==e&&stage.dispatchEventWith(GameEvtType.SHAREFINISH,!1)}};O().callSharePane(e)}function m(t){void 0===t&&(t={});var e=WEB.getVar("shareUrl")+x(t);console.log("分享url",e);var n=WEB.getVar("shareTitle"),i=WEB.getVar("shareDesc"),o=WEB.getVar("shareImg"),r={title:n,content:i,url:e,img:o,clickcallback:function(t){console.log("分享成功",t);var e=parseInt(t.shareResult);0==e&&stage.dispatchEventWith(GameEvtType.SHAREFINISH,!1)},channel:"Wxfriends,QQfriends",keyparam:{keyChannel:"Wxfriends",keyEndTime:"1625066999000",keyTitle:n,keyContent:i,url:e,keyImg:"https://static.ssl.jimingkeji.com.cn/jd_ar_618_2021/plugin/tmp/share.png",sourceCode:"gxjsb",keyId:"00931241"}};O().callSharePane(r)}function v(){return new Promise(function(t,e){L().getUserInfo(function(n){console.log("获取用户信息",n),200==n.rc?t(n.rv):e(n)},function(t){console.log("获取用户信息失败",t),e(t)})})}function w(){return new Promise(function(e,n){L().isRisk(t.pin,function(i){console.log("风控",i),"200"==i.rc?(1==i.rv&&(console.log("风控用户"),e(!0)),i.rv.coupon&&(console.log("优惠劵风控用户"),e(!0)),i.rv.bean&&(console.log("京豆风控用户"),e(!0)),0==i.rv&&(console.log("不是风控用户"),t.isRisk=!1,e(!1))):(console.log("风控 失败",i),n(i))},function(t){console.log("风控 错误",t),n(t)})})}function y(t){return new Promise(function(e,n){window.jd.ar.serve.queryFollowShop(t,function(i){console.log("查询关注",i),"200"==i.rc&&i.rv[t]?e(null):n(i)},function(t){console.log("查询关注 失败",t),n(t)})})}function E(e){return new Promise(function(n,i){t.queryFollow(e).then(function(t){n(t)})["catch"](function(){window.jd.ar.serve.followShop(1,e,function(t){console.log("followShop:",t),"200"==t.rc?t.rv&&n(null):i(t)
},function(t){console.log("followShop err",t),i(t)})})})}function b(t,e){return new Promise(function(n,i){console.log("优惠券id",t),L().sendCoupon(t,function(t){if(t.rv&&t.rv.result)RPC.callSign("user/rePrizeStu",{u:GV.userId,lz_id:e,s:1},function(t){n(!0)},this,function(t){i(t)});else{i(t);try{var o=JSON.stringify(t);RPC.callSign("user/rePrizeStu",{u:GV.userId,lz_id:e,s:o},function(t){},this,function(t){})}catch(r){}}console.log("sendCoupon res",t)},function(t){i(t),console.log("sendCoupon err",t);try{var n=JSON.stringify(t);RPC.callSign("user/rePrizeStu",{u:GV.userId,lz_id:e,s:n},function(t){},this,function(t){})}catch(o){}})})}function T(t,e,n){return new Promise(function(i,o){L().sendBean(t,e,function(t){if(t.rv&&t.rv.result)RPC.callSign("user/rePrizeStu",{u:GV.userId,lz_id:n,s:1},function(t){i(!0)},this,function(t){o(t)});else{o(t);try{var e=JSON.stringify(t);RPC.callSign("user/rePrizeStu",{u:GV.userId,lz_id:n,s:e},function(t){},this,function(t){})}catch(r){}}console.log("sendBean res",t)},function(t){o(t),console.log("sendBean err",t);try{var e=JSON.stringify(t);RPC.callSign("user/rePrizeStu",{u:GV.userId,lz_id:n,s:e},function(t){},this,function(t){})}catch(i){}})})}function C(){if(!a())return console.log("请在京东环境下使用"),IS_LOCALHOST?1:2;var e=O().getAppVersion("jd");if(console.log("京东APP Ver",e),O().isIOS()){console.log("IOS");var n=O().getIPhoneModel().toLowerCase();n=n.split("iphone")[1].replace(/,/g,"."),console.log("deviceVer",n);var i=O().getIOSVersion();return console.log("iosVer",i),S(n,"8.1")<=0||S(n,"8.4")<=0?(console.log("IOS 机型版本小于8.1(6s) 5S"),4):O().versionCompare(i,"11.0.0")<=0?(console.log("苹果系统版本小于11.0.0"),3):O().versionCompare(e,"8.5.0")<=0?(console.log("IOS APP版本小于8.3.0"),2):(console.log("支持AR环境"),t.isCan=!0,1)}if(O().isAndroid()){console.log("Android ");var o=O().getAndroidVersion();if(console.log("androidVer",o),O().versionCompare(o,"6.0.0")<0)return console.log("android 系统版本不支持"),3;if(O().versionCompare(e,"8.5.0")<=0)return console.log("android App版本不支持"),2;var r=navigator.userAgent.toLocaleLowerCase();return r.match("sm919")||r.match("yq601")||r.match("vivo x9plus")?(console.log("机型不支持"),4):(console.log("支持AR环境"),t.isCan=!0,1)}}function G(t){void 0===t&&(t={});var e=window.jdshare,n=WEB.getVar("shareUrl")+x(t);e.callSharePane({title:WEB.getVar("shareTitle"),content:WEB.getVar("shareDesc"),url:n,img:WEB.getVar("shareImg"),mpId:"gh_cdcc98b0d82a",mpIconUrl:"https://storage.360buyimg.com/arcity/share_icon.png",mpPath:"/pages/share/share?url="+encodeURIComponent(n),mpType:"0",clickcallback:function(t){console.log("分享成功",t);var e=parseInt(t.shareResult);0==e&&stage.dispatchEventWith(GameEvtType.SHAREFINISH,!1)}})}function x(t){for(var e="",n=Object.keys(t),i=0;i<n.length;i++)t[n[i]]&&(e+=""==e?"?"+n[i]+"="+t[n[i]]:"&"+n[i]+"="+t[n[i]]);return""!=e&&(e="&urlparam="+encodeURIComponent(e)),e}function S(t,e){var n=parseInt(t.split(".")[0]),i=parseInt(e.split(".")[0]);if(n>i)return 1;if(n==i){var o=parseInt(t.split(".")[1]),r=parseInt(e.split(".")[1]);return o>r?1:o==r?0:-1}return-1}var R="app_304",A="a4b2541fe4b1bf46d3c4c7881618fb43857813fc",P="0d31925b314ab676",B=!1;t.isRisk=!0,t.isCan=!1;var O=function(){return window.jd.ar},L=function(){return window.jd.ar.serve};t.init=e,t.initServe=n,t.initGetUser=i;t.initPicture=o,t.exit=r,t.go2Back=s,t.isJd=a,t.handGestureRecognition=c,t.takePhoto=h,t.openTab=l,t.goLogin=u,t.getPin=d,t.viewGoods=p,t.goShop=g,t.addCar=f,t.share=_,t.shareJing=m,t.getUserInfo=v,t.isLegitimateUser=w,t.queryFollow=y,t.followShop=E,t.sendCoupon=b,t.sendBean=T,t.deviceIsSupport=C,t.shareMini=G}(JDtool||(JDtool={}));var ArEvent;!function(t){t.WINHIDDEN="window_hidden",t.WINSHOW="window_show",t.GESTURE="ar_handGesture",t.PICTURE="ar_takePhoto"}(ArEvent||(ArEvent={}));var JdMiniPlatform=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setup=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return this.event=new egret.EventDispatcher,window.loadScript(["https://static.ssl.jimingkeji.com.cn/libs/extra/jdjssdk.min.js"],function(){t.cb&&t.cb()},!0),[2]})})},e.prototype.getUserInfo=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},e.prototype.login=function(t){return __awaiter(this,void 0,void 0,function(){function e(e){var n=e.data;n?RPC.callSign("user/jd_login",{jd_token:n},function(e){t&&t(e)},this):console.log("获取token失败",e)}function n(t){1==t.data?window.JSSDK.Isv.requestIsvToken({url:window.location.href},e):window.location.href="//passport.m.jd.com/user/login.action?returnurl="+encodeURIComponent(window.location.href)}return __generator(this,function(t){return window.JSSDK.Isv.isAppLogin(n),[2]})})},e.prototype.share=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return window.wx.miniProgram.navigateTo({url:"/pages/h5share/index/index?atmosimgurl="+encodeURIComponent(t.jdImg)+"&sharetitle="+encodeURIComponent(t.title)+"&shareurl="+encodeURIComponent(t.link)+"&shareimgurl="+encodeURIComponent(t.img)+"&isautoback=1"}),[2]})})},e.prototype.updateShareConfig=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},e}(BasePlatform);__reflect(JdMiniPlatform.prototype,"JdMiniPlatform");var JdPlatform=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setup=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return this.event=new egret.EventDispatcher,window.loadScript(["https://static.ssl.jimingkeji.com.cn/libs/extra/jdjssdk.min.js","https://static.ssl.jimingkeji.com.cn/libs/extra/jm-jdshare.js"],function(){t.cb&&t.cb()},!0),[2]})})},e.prototype.getUserInfo=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},e.prototype.login=function(t){return __awaiter(this,void 0,void 0,function(){function e(e){var n=e.data;n?RPC.callSign("user/jd_login",{jd_token:n},function(e){t&&t(e)},this):console.log("获取token失败",e)}function n(t){1==t.data?window.JSSDK.Isv.requestIsvToken({url:window.location.href},e):window.location.href="//passport.m.jd.com/user/login.action?returnurl="+encodeURIComponent(window.location.href)}return __generator(this,function(t){return window.JSSDK.Isv.isAppLogin(n),[2]})})},e.prototype.share=function(t){return __awaiter(this,void 0,void 0,function(){var e,n=this;return __generator(this,function(i){return e=window.jdshare,e.callSharePane({title:t.title,content:t.desc,url:t.link,img:t.img,channel:t.channel,callback:function(t){console.log("分享成功",t);var e=parseInt(t.shareResult);0==e?n.event.dispatchEventWith("jdshare_ok"):n.event.dispatchEventWith("jdshare_cancel")}}),[2]})})},e.prototype.shareToMiNi=function(t){return __awaiter(this,void 0,void 0,function(){var e,n=this;return __generator(this,function(i){return e=window.jdshare,e.callSharePane({title:t.title,content:t.desc,url:t.link,img:t.img,channel:t.channel,mpId:"gh_45b306365c3d",mpIconUrl:t.shareJDImg,mpPath:"/pages/h5/index?encode_url="+encodeURIComponent(t.link),mpType:"0",clickcallback:function(t){console.log("分享成功",t);var e=parseInt(t.shareResult);0==e?n.event.dispatchEventWith("jdshare_ok"):n.event.dispatchEventWith("jdshare_cancel")}}),[2]})})},e.prototype.updateShareConfig=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return window.jdshare.setShareInfo({title:t.title,content:t.desc,url:t.link,img:t.img}),[2]})})},e}(BasePlatform);__reflect(JdPlatform.prototype,"JdPlatform");var OppoPlusPlatform=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setup=function(t){return __awaiter(this,void 0,void 0,function(){var e=this;return __generator(this,function(n){return this.event=new egret.EventDispatcher,window.loadScript(["https://static.ssl.jimingkeji.com.cn/libs/extra/RainbowBridge.js","https://static.ssl.jimingkeji.com.cn/libs/extra/common.js"],function(){t.cb&&t.cb(),window.RainbowBridge.callMethod("JSCommondMethod","controlTopRightBtn",{showType:1},function(t){}),e.updateShareConfig(t.shareConfig)},!0),[2]})})},e.prototype.getUserInfo=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return t&&t({}),[2]})})},e.prototype.login=function(t){return __awaiter(this,void 0,void 0,function(){var e,n=this;return __generator(this,function(i){return window.RainbowBridge?(e=window.getQueryVariable("uid"),window.RainbowBridge.callMethod("JSCommondMethod","getToken",null,function(i){if(!i.data||!i.data.ssoid)return void RPCtip.GET.showToast("请先登录OPPO+！");var o=window.getQueryVariable("redirect"),r=window.getQueryVariable("credits"),s=window.getQueryVariable("sign"),a=window.getQueryVariable("timestamp"),c=i.data.ssoid;RPC.call2("/app/auth/Login",{oppoId:e,ssoid:c,dbredirect:o,credits:r,sign:s,timestamp:a},function(e){0==e.code&&e.token?t&&t(e):RPCtip.GET.showToast("获取授权失败,请重试!")},n)}),[2]):(console.warn("没有找到OPPO+组件"),[2])})})},e.prototype.share=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return console.warn("OPPO+平台无法主动调起分享"),[2]})})},e.prototype.updateShareConfig=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return window.share({title:t.title,desc:t.desc,imgUrl:t.img,link:t.link}),[2]})})},e}(BasePlatform);__reflect(OppoPlusPlatform.prototype,"OppoPlusPlatform");var TbPlatform=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setup=function(t){return __awaiter(this,void 0,void 0,function(){var e=this;return __generator(this,function(n){return window.loadScript(["https://appx/web-view.min.js"],function(){t.cb&&t.cb(),e.my=window.my,window.my.onMessage=function(t){switch(t.type){case"addCar":"car"==t.data?(console.log("点击加入购物车"),stage.dispatchEventWith("ADDCAR",!1)):(console.log("点击立即购买"),stage.dispatchEventWith("ADDCAR",!1))}}},!0),console.log("启动TbPlatform"),[2]})})},e.prototype.getUserInfo=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return t&&t({}),[2]})})},e.prototype.login=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return t&&t({}),[2]})})},e.prototype.share=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return window.my.postMessage({type:"share",data:t}),t.success&&t.success({}),[2]})})},e.prototype.openCar=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return window.my.postMessage({type:"openCar",data:""}),[2]})})},e.prototype.addCar=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return window.my.postMessage({type:"addCar",data:t.itemId}),[2]})})},e.prototype.updateShareConfig=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},e}(BasePlatform);__reflect(TbPlatform.prototype,"TbPlatform");var WebPlatform=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setup=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return console.log("启动webPlatform"),[2]})})},e.prototype.getUserInfo=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return t&&t({}),[2]})})},e.prototype.login=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return t&&t({}),[2]})})},e.prototype.share=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return t.success&&t.success({}),[2]})})},e.prototype.updateShareConfig=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return console.log("网页端无法更新分享配置"),[2]})})},e}(BasePlatform);__reflect(WebPlatform.prototype,"WebPlatform");var WechatPlatform=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setup=function(t){return __awaiter(this,void 0,void 0,function(){var e,n=this;return __generator(this,function(i){return this.event=new egret.EventDispatcher,e=t.apiList||["onMenuShareTimeline","onMenuShareAppMessage"],this.shareURL=WEB.getVar("shareUrl")+"",window.$.ajax({type:"POST",url:t.authApi,dataType:"json",data:{},async:!0,success:function(i){console.log("result",i),window.wx.ready(function(){n.updateShareConfig(t.shareConfig)}),i=i.data.content,window.wx.config({debug:t.debug||!1,appId:i.appId,timestamp:i.timestamp,nonceStr:i.nonceStr,signature:i.signature,jsApiList:e,openTagList:["wx-open-launch-weapp"]})},error:function(t){}}),[2]})})},e.prototype.getUserInfo=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return console.warn("微信平台通过后台埋点获取用户信息"),[2]})})},e.prototype.login=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return console.warn("微信平台通过后台埋点获取登录信息"),[2]})})},e.prototype.loginToJD=function(t){return __awaiter(this,void 0,void 0,function(){var e,n,i;return __generator(this,function(o){return e=WEB.getURLParams("token"),n=WEB.getVar("app_name")+"_jd_login",i=localStorage.getItem(n),e||i?(RPC.callSign("user/jd_login",{jd_token:e||i},function(e){t&&t(e)},this,function(t){window.location.replace("//wq.jd.com/pinbind/pintokenredirect?biz=jm-business-center&url="+window.location.href)}),e&&localStorage.setItem(n,e)):window.location.replace("//wq.jd.com/pinbind/pintokenredirect?biz=jm-business-center&url="+window.location.href),[2]})})},e.prototype.share=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return console.warn("微信平台无法主动调起分享"),[2]})})},e.prototype.updateShareConfig=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return t.timelineLink=t.timelineLink||this.shareURL,t.appMessageLink=t.appMessageLink||this.shareURL,window.wx.onMenuShareTimeline({title:t.timelineTitle||t.title,link:t.timelineLink||t.link,imgUrl:t.timelineImgUrl||t.img,success:function(){this.event&&this.event.dispatchEventWith("pengyouquan_ok")},cancel:function(){this.event&&this.event.dispatchEventWith("pengyouquan_cancel")}}),window.wx.onMenuShareAppMessage({title:t.appMessageTitle||t.title,desc:t.appMessageDesc||t.desc,link:t.appMessageLink||t.link,imgUrl:t.appMessageImgUrl||t.img,type:"link",dataUrl:"",success:function(){this.event&&this.event.dispatchEventWith("pengyou_ok")},cancel:function(){this.event&&this.event.dispatchEventWith("pengyou_cancel")}}),[2]})})},e}(BasePlatform);__reflect(WechatPlatform.prototype,"WechatPlatform");var WeiboPlatform=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setup=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return console.log("启动weiboPlatform"),[2]})})},e.prototype.getUserInfo=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return console.log("微博平台通过后台埋点获取用户信息"),[2]})})},e.prototype.login=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return console.log("微博平台通过后台埋点获取登录信息"),[2]})})},e.prototype.share=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return t.success&&t.success({}),[2]})})},e.prototype.updateShareConfig=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},e}(BasePlatform);__reflect(WeiboPlatform.prototype,"WeiboPlatform");var GboxButton=function(t){function e(e,n,i,o){void 0===n&&(n=!0),void 0===i&&(i=""),void 0===o&&(o="");var r=t.call(this)||this;return r.autoRemove=n,r.res=RES.getRes(e),i&&(r.selectRes=RES.getRes(i)),o&&(r.disableRes=RES.getRes(o)),r.btn=new egret.Bitmap(r.res),r.addChild(r.btn),r.addEventListener(egret.Event.ADDED_TO_STAGE,r.onAdded,r),r.addEventListener(egret.Event.REMOVED_FROM_STAGE,r.onRemove,r),r}return __extends(e,t),e.prototype.onRemove=function(){this.autoRemove&&this.removeListeners()},e.prototype.onAdded=function(){this.anchorOffsetX=this.width>>1,this.anchorOffsetY=this.height>>1,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this._onTap,this),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this._onTapBegin,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this._onTapEnd,this),this.addEventListener(egret.TouchEvent.TOUCH_CANCEL,this._onTapEnd,this),this.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this._onTapEnd,this),this.onTapDown(null),this.onTapUp(null)},e.prototype._disableBtn=function(){var t=this;this.touchEnabled=!1,setTimeout(function(){t.touchEnabled=!0},500)},e.prototype.disableState=function(t){this.touchEnabled=!t,this.disableRes&&(this.btn.texture=t?this.disableRes:this.res)},e.prototype.setDisableRes=function(){this.btn.texture=this.disableRes},e.prototype._onTapBegin=function(t){this.downCallback&&this.downCallback()},e.prototype._onTapEnd=function(t){this.upCallback&&this.upCallback()},e.prototype._onTap=function(t){this._disableBtn(),this.tapCallback&&this.tapCallback()},e.prototype.onTapDown=function(t){var e=this;t?this.downCallback=t:this.downCallback=function(){e.selectRes?e.btn.texture=e.selectRes:(egret.Tween.removeTweens(e),egret.Tween.get(e).to({scaleX:.9,scaleY:.9},0))}},e.prototype.onTapUp=function(t){var e=this;t?this.upCallback=t:this.upCallback=function(){e.selectRes?e.btn.texture=e.res:(egret.Tween.removeTweens(e),egret.Tween.get(e).to({scaleX:1,scaleY:1},0))}},e.prototype.onTap=function(t){this.tapCallback=t},e.prototype.removeListeners=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._onTap,this),this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this._onTapBegin,this),this.removeEventListener(egret.TouchEvent.TOUCH_END,this._onTapEnd,this),this.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,this._onTapEnd,this),this.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this._onTapEnd,this),this.tapCallback=null,this.downCallback=null,this.upCallback=null},e}(egret.DisplayObjectContainer);__reflect(GboxButton.prototype,"GboxButton");var Gbutton=function(t){function e(e,n,i,o){void 0===n&&(n=!0),void 0===i&&(i=""),void 0===o&&(o="");var r=t.call(this)||this;return r.autoRemove=n,r.res=RES.getRes(e),i&&(r.selectRes=RES.getRes(i)),o&&(r.disableRes=RES.getRes(o)),r.texture=r.res,r.addEventListener(egret.Event.ADDED_TO_STAGE,r.onAdded,r),r.addEventListener(egret.Event.REMOVED_FROM_STAGE,r.onRemove,r),r}return __extends(e,t),e.prototype.onRemove=function(){this.autoRemove&&this.removeListeners()},e.prototype.onAdded=function(){this.anchorOffsetX=this.width>>1,this.anchorOffsetY=this.height>>1,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this._onTap,this),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this._onTapBegin,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this._onTapEnd,this),this.addEventListener(egret.TouchEvent.TOUCH_CANCEL,this._onTapEnd,this),this.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this._onTapEnd,this),this.onTapDown(null),this.onTapUp(null)},e.prototype._disableBtn=function(){var t=this;this.touchEnabled=!1,setTimeout(function(){t.touchEnabled=!0},500)},e.prototype.disableState=function(t){this.touchEnabled=!t,this.disableRes&&(this.texture=t?this.disableRes:this.res)},e.prototype.setDisabelRes=function(){this.texture=this.disableRes},e.prototype._onTapBegin=function(t){this.downCallback&&this.downCallback()},e.prototype._onTapEnd=function(t){this.upCallback&&this.upCallback()},e.prototype._onTap=function(t){this._disableBtn(),this.tapCallback&&this.tapCallback(),GG.Audio.playSFX("click_mp3")},e.prototype.onTapDown=function(t){var e=this;t?this.downCallback=t:this.downCallback=function(){e.selectRes?e.texture=e.selectRes:(egret.Tween.removeTweens(e),egret.Tween.get(e).to({scaleX:.9,scaleY:.9},0))}},e.prototype.onTapUp=function(t){var e=this;t?this.upCallback=t:this.upCallback=function(){e.selectRes?e.texture=e.res:(egret.Tween.removeTweens(e),egret.Tween.get(e).to({scaleX:1,scaleY:1},0))}},e.prototype.onTap=function(t){this.tapCallback=t},e.prototype.removeListeners=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._onTap,this),this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this._onTapBegin,this),this.removeEventListener(egret.TouchEvent.TOUCH_END,this._onTapEnd,this),this.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,this._onTapEnd,this),this.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this._onTapEnd,this),this.tapCallback=null,this.downCallback=null,this.upCallback=null},e}(egret.Bitmap);__reflect(Gbutton.prototype,"Gbutton");var GbuttonMusic=function(t){function e(n,i,o){void 0===o&&(o=!0);var r=t.call(this)||this,s=GG.newGbutton(n,r,!1);return s.touchEnabled=!0,s.alpha=.8,r._muteSFX=o,r._open=n,r._close=i,0==e.frame?(s.texture=RES.getRes(n),egret.Tween.get(s,{loop:!0}).to({rotation:360},5e3)):(s.texture=RES.getRes(i),egret.Tween.removeTweens(s),s.rotation=0),s.onTapUp(function(){0==e.frame?(r.mute(!0),egret.Tween.removeTweens(s),s.rotation=0):(r.mute(!1),egret.Tween.get(s,{loop:!0}).to({rotation:360},5e3))}),r._btn=s,r}return __extends(e,t),e.prototype.mute=function(t){var n=this._btn;t?(e.frame=1,GG.Audio.muteMusic(!0),this._muteSFX&&GG.Audio.muteSFX(!0),n.texture=RES.getRes(this._close)):(e.frame=0,GG.Audio.muteMusic(!1),this._muteSFX&&GG.Audio.muteSFX(!1),n.texture=RES.getRes(this._open))},e.frame=0,e}(egret.DisplayObjectContainer);__reflect(GbuttonMusic.prototype,"GbuttonMusic");var Gimage=function(t){function e(e,n){void 0===e&&(e=0),void 0===n&&(n=0);var i=t.call(this)||this;return i._anchorX=e,i._anchorY=n,i}return __extends(e,t),e.prototype.setUrl=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=null);var i=this;RES.getResByUrl(t,function(t){i.texture=t,i.anchorOffsetX=i.width*i._anchorX,i.anchorOffsetY=i.height*i._anchorY,e&&e.call(n,this)},this,RES.ResourceItem.TYPE_IMAGE)},e.prototype.setRes=function(t){var e=this;this.texture=RES.getRes(t),e.anchorOffsetX=e.width*e._anchorX,e.anchorOffsetY=e.height*e._anchorY},e}(egret.Bitmap);__reflect(Gimage.prototype,"Gimage");var MyLoadingUI=function(t){function e(){var e=t.call(this)||this;return e.progress=0,e.threeProgress=0,e.isRpcTrue=!1,e.isLoadTrue=!1,e}return __extends(e,t),e.prototype.onCreate=function(){GV.add3DEventListener(ThreeEventConst.LOAD_PROGRESS_CHANGE,this.on3DProgress,this),GV.dispatch3DEvent(ThreeEventConst.LOAD_3D,{scene:1}),GV.scenceLoadState[1]=!0},e.prototype.onResLoaded=function(){var t=this;setTimeout(function(){t.createUI()},100)},e.prototype.createUI=function(){GG.newBitmap("load_bar_bg_png",this,144,982);var t=GG.newBitmap("load_bar_png",this);t.x=144,t.y=982;var e=GG.newBitmap("load_bar_png",this);e.x=-316,e.y=982,e.mask=t,this.bar=e;var n=new egret.TextField;n.size=30,n.textColor=9786940,n.width=stageW,n.textAlign=egret.HorizontalAlign.CENTER,n.y=1036,this.addChild(n),this.txt=n},e.prototype.on3DProgress=function(t){this.threeProgress=t.current/t.total,this.changeBar()},e.prototype.onProgress=function(t,e){this.progress=t/e,this.changeBar()},e.prototype.changeBar=function(){if(this.txt){var t=(this.progress+this.threeProgress)/2;this.txt.text=Math.round(100*t)+"%";var e=-316+460*t;egret.Tween.removeTweens(this.bar),egret.Tween.get(this.bar).to({x:e},33),t>=1&&(GV.add3DEventListener(ThreeEventConst.LOAD_PROGRESS_CHANGE,null,this),this.isLoadTrue=!0,this.next())}},e.prototype.next=function(){var t=this;this.isLoadTrue&&setTimeout(function(){stage.dispatchEventWith(GameEvtType.LOADOVER,!1),t.kill()},50)},e.prototype.onComplete=function(){this.kill()},e.prototype.kill=function(){window.loadingRoot.hide(),GG.removeDisplayObject(this),RES.destroyRes("load",!1)},e}(Gloading);__reflect(MyLoadingUI.prototype,"MyLoadingUI");var Gtext=function(t){function e(){return t.call(this)||this}return __extends(e,t),Object.defineProperty(e.prototype,"htmlText",{set:function(t){var e=new egret.HtmlTextParser;this.textFlow=e.parser(t)},enumerable:!0,configurable:!0}),e}(egret.TextField);__reflect(Gtext.prototype,"Gtext");var GScroll=function(){function t(t){this._isVertical=!0,this._isAjaxing=!1,this._curPage=1,this._startY=0,this._options=t,this.init()}return t.prototype.refresh=function(){this._rankListData.length=0,this.getRank(1)},t.prototype.init=function(){if(this._rankListData=[],this._scrollView=this._options.scrollView,this._scrollCon=this._options.scrollCon,this._isVertical=this._options.isVertical,this._createItem=this._options.createItem,this._itemGap=this._options.itemGap?this._options.itemGap:6,this._startY=this._options.startY||0,this._callThisRef=this._options.callThisRef,this._callFun=this._options.callFun,this._callMaxFun=this._options.callMaxFun,this._callNullFun=this._options.callNullFun,this._options.scrollTrack&&(this._scrollTrack=GG.newBitmap(this._options.scrollTrack,this._scrollView.parent),this._isVertical?(GG.setAnchor(this._scrollTrack,.5,0),this._scrollTrack.x=this._scrollView.x-this._scrollView.anchorOffsetX+this._scrollView.width+this._options.offsetX,this._scrollTrack.y=this._scrollView.y-this._scrollView.anchorOffsetY+this._options.offsetY):(GG.setAnchor(this._scrollTrack,0,.5),this._scrollTrack.x=this._scrollView.x-this._scrollView.anchorOffsetX+this._options.offsetX,this._scrollTrack.y=this._scrollView.y-this._scrollView.anchorOffsetY+this._scrollView.height+this._options.offsetY),this._scrollTrack.height=this._scrollView.height),this._options.scrollBar)if(this._scrollBar=GG.newBitmap(this._options.scrollBar,this._scrollView.parent),this._isVertical){GG.setAnchor(this._scrollBar,.5,0),this._scrollBar.x=this._scrollView.x-this._scrollView.anchorOffsetX+this._scrollView.width+this._options.offsetX,this._scrollBar.y=this._scrollView.y-this._scrollView.anchorOffsetY+this._options.offsetY,this.barGap=this._scrollView.height-this._scrollBar.height,this.start_y=this._scrollView.y-this._scrollView.anchorOffsetY;var t=GG.newRect(this._scrollBar.width,this._scrollTrack.height,0,this._scrollView.parent);GG.setAnchor(t,.5,0),t.x=this._scrollBar.x,t.y=this._scrollTrack.y,this._scrollBar.mask=t}else{GG.setAnchor(this._scrollBar,0,.5),this._scrollBar.x=this._scrollView.x-this._scrollView.anchorOffsetX+this._options.offsetX,this._scrollBar.y=this._scrollView.y-this._scrollView.anchorOffsetY+this._scrollView.height+this._options.offsetY,this.barGap=this._scrollView.width-this._scrollBar.width,this.start_x=this._scrollView.x-this._scrollView.anchorOffsetX;var t=GG.newRect(this._scrollTrack.width,this._scrollBar.height,0,this._scrollView.parent);GG.setAnchor(t,0,.5),t.x=this._scrollTrack.x,t.y=this._scrollBar.y,this._scrollBar.mask=t}this._scrollView.addEventListener(egret.Event.CHANGE,this.changeHandler,this),this.getRank()},t.prototype.getRank=function(t){var e=this;void 0===t&&(t=1);var n={u:GV.userId,page:t,limit:this._options.limited};for(var i in this._options.params)n[i]=this._options.params[i];RPC.callSign(this._options.re_url,n,function(n){if(e._isAjaxing=!1,1==t&&0==n.data[e._options.res_name].length)return void(e._callNullFun&&e._callThisRef&&e._callNullFun.call(e._callThisRef,n.data));if(n.data&&n.data[e._options.res_name]){var i=n.data[e._options.res_name];1==t&&e._scrollCon.removeChildren(),e.updateScrollView(i),0==i.length?e._callMaxFun&&e._callThisRef&&e._callMaxFun.call(e._callThisRef,n.data):e._callFun&&e._callFun.call(e._callThisRef,n.data)}},this)},t.prototype.updateScrollView=function(t){if(0==t.length)return void(this._isEnd=!0);this._isEnd=!1;for(var e=t.length,n=this._rankListData.length,i=0;e>i;i++){var o=this._createItem(i+n,t[i]);this._isVertical?(o.y=this._startY+(o.height+this._itemGap)*(n+i),this._scrollCon.addChild(o),this._scrollCon.height=(o.height+this._itemGap)*(n+i+1)):(o.x=(o.width+this._itemGap)*(n+i+1),this._scrollCon.addChild(o),this._scrollCon.width=(o.width+this._itemGap)*(n+i+1+1))}console.log("this._startY",this._startY+60,this._scrollCon.height),this._scrollCon.height+=this._startY+60,(r=this._rankListData).push.apply(r,t),this._isAjaxing=!1;var r},t.prototype.changeHandler=function(){if(this._isVertical){if(this._scrollView.scrollTop>=this._scrollView.getMaxScrollTop()&&!this._isEnd){if(this._isAjaxing)return;this._isAjaxing=!0,this._curPage++,this.getRank(this._curPage)}this._scrollBar&&(this._scrollBar.y=this.start_y+this._scrollView.scrollTop/this._scrollView.getMaxScrollTop()*this.barGap)}else{if(this._scrollView.scrollLeft>=this._scrollView.getMaxScrollLeft()&&!this._isEnd){if(this._isAjaxing)return;this._isAjaxing=!0,this._curPage++,this.getRank(this._curPage)}this._scrollBar&&(this._scrollBar.x=this.start_x+this._scrollView.scrollLeft/this._scrollView.getMaxScrollLeft()*this.barGap)}},t.prototype.removeEvent=function(){this._scrollView.removeEventListener(egret.Event.CHANGE,this.changeHandler,this)},t.prototype.createScrollView=function(t){},t}();__reflect(GScroll.prototype,"GScroll");var rsAstralRange="\\ud800-\\udfff",rsZWJ="\\u200d",rsVarRange="\\ufe0e\\ufe0f",rsComboMarksRange="\\u0300-\\u036f",reComboHalfMarksRange="\\ufe20-\\ufe2f",rsComboSymbolsRange="\\u20d0-\\u20ff",rsComboRange=rsComboMarksRange+reComboHalfMarksRange+rsComboSymbolsRange,reHasUnicode=RegExp("["+rsZWJ+rsAstralRange+rsComboRange+rsVarRange+"]"),SpecialChar;!function(t){function e(t){return n(t)?i(t):o(t)}function n(t){return reHasUnicode.test(t)}function i(t){return t.match(m)||[]}function o(t){return t.split("")}var r="\\ud83c[\\udffb-\\udfff]",s="["+rsVarRange+"]?",a="["+rsComboRange+"]",c="(?:"+a+"|"+r+")",h=c+"?",l="["+rsAstralRange+"]",u="[^"+rsAstralRange+"]",d="(?:\\ud83c[\\udde6-\\uddff]){2}",p="[\\ud800-\\udbff][\\udc00-\\udfff]",g="(?:"+rsZWJ+"(?:"+[u,d,p].join("|")+")"+s+h+")*",f=s+h+g,_="(?:"+[u+a+"?",a,d,p,l].join("|")+")",m=RegExp(r+"(?="+r+")|"+_+f,"g");t.toArray=e,t.hasUnicode=n,t.unicodeToArray=i,t.asciiToArray=o}(SpecialChar||(SpecialChar={}));var FerruleItem=function(t){function e(e,n,i,o){void 0===o&&(o="");var r=t.call(this)||this;r.res=RES.getRes(e),o&&(r.selectRes=RES.getRes(o)),r.ferrule=new egret.Bitmap(r.res),r.addChild(r.ferrule),r.ferrule.y=11;var s=GG.newCircle(19,16544589,r);return s.visible=!1,s.x=55,r.numTxt=GG.newBitmapText(r,"game_num"),r.numTxt.visible=!1,r.changeNum(n),i.addChild(r),r}return __extends(e,t),e.prototype.changeNum=function(t){this.numTxt.text=t+"",GG.setAnchor(this.numTxt),this.numTxt.x=74,this.numTxt.y=19.5,t>99&&(this.numTxt.scaleX=this.numTxt.scaleY=.6)},e.prototype.select=function(){this.selectRes&&(this.ferrule.texture=this.selectRes)},e.prototype.recover=function(){this.ferrule.texture=this.res},e}(egret.DisplayObjectContainer);__reflect(FerruleItem.prototype,"FerruleItem");var egretFixed=function(){function t(){}return Object.defineProperty(t,"GET",{get:function(){return null==t._instance&&(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),t.prototype.hack=function(){this.fixInputTooTop()},t.prototype.fixInputTooTop=function(){egret.StageText.prototype.onFocusHandler=function(){var t=this;"iOS"!=egret.Capabilities.os&&window.setTimeout(function(){t.inputElement&&t.inputElement.scrollIntoView(!1)},400)}},t}();__reflect(egretFixed.prototype,"egretFixed");var RPC;!function(t){function e(e,n,i,o,r,s){function a(t){var e=window.Base64,n=e.encode(e.encode(t));return n=n.replace(/\+/g,"-"),n=n.replace(/\//g,"_"),n=n.replace(/J/g,"JM"),n=n.replace(/W/g,"WY")}void 0===r&&(r=null),void 0===s&&(s=!0);var c={};if(c.version="1.0",c.method=e,c.requestId=0,c.params=n,t.debug)return void setTimeout(function(){i.call(o)},1e3);var h;if(s&&n){h={},n.token=(new Date).getTime().toString();var l=JSON.stringify(n),u=a(l);h.params=u}var d=s?h:c;window.$.ajax({type:"POST",url:WEB.getVar("rpc_url")+""+e,dataType:"json",data:{requestObj:JSON.stringify(d)},async:!0,success:function(t){console.log(e+"::sendData:"),console.log(c),console.log(e+"::getData:"),console.log(t),0==+t.code?i.call(o,t):(console.log(t),r?r.call(o,t):(console.log("数据异常,请刷新重试"),console.log(t)))
},error:function(t){console.log("接口error:"+JSON.stringify(t))}})}function n(e,n,i,o,r,s){void 0===r&&(r=null),void 0===s&&(s=!0);var a={},l=GV.RPC_APPID,u=GV.RPC_TOKEN,d=!1,p=!1,g=GG.newRectBlock(dialog,0,0);if(!l||!u)return void RPCtip.GET.showToast("appid或token错误");if(s){n.appId=l,n.token=u,n.nonce=1e3*Math.random()+"",n.timestamp=(new Date).getTime().toString();var f=t.signMD5(n);delete n.appId,a=n,a.sign=f}else a=n;c&&clearTimeout(c),h&&clearTimeout(h),c=setTimeout(function(){d=!0,RPCtip.GET.showToastImg("请稍候")},2e3),h=setTimeout(function(){clearTimeout(h),h=null,p=!0,_()},8e3);var _=function(){c&&clearTimeout(c),h&&(clearTimeout(h),h=null),GG.removeDisplayObject(g),d&&RPCtip.GET.hideTip(),d=!1};window.$.ajax({headers:{appId:l},type:"POST",url:WEB.getVar("rpc_url")+""+e,dataType:"json",data:a,async:!0,success:function(t){p||(_(),0==+t.code?(console.log(e,t),i.call(o,t)):r&&r.call(o,t))},error:function(t){p||(_(),t.code?r&&r.call(o,t):"user/jdAuth"==e&&r&&r.call(o,t))}})}function i(t,e,n,i,o){var r={};r.version="1.0",r.method=e,r.requestId=0,r.params=n,window.$.ajax({type:"POST",url:t,dataType:"json",data:{requestObj:JSON.stringify(r)},async:!0,success:function(t){"fail"==t.status?alert(t.msg):i.call(o,t)},error:function(t){alert(t)}})}function o(e,n,i,o,r,s){return void 0===r&&(r="POST"),void 0===s&&(s="json"),t.debug?void setTimeout(function(){i.call(o)},1e3):void window.$.ajax({type:"POST",url:WEB.getVar("rpc_url")+""+e,dataType:"json",data:n,async:!0,success:function(t){"fail"==t.status?alert(t.msg):i.call(o,t)},error:function(t){alert(t)}})}function r(e,n,i,o,r,s){return void 0===r&&(r="POST"),void 0===s&&(s="json"),t.debug?void setTimeout(function(){i.call(o)},1e3):void window.$.ajax({type:"POST",url:e,dataType:"json",data:n,async:!1,success:function(t){"fail"==t.status?alert(t.msg):i.call(o,t)},error:function(t){alert(t)}})}function s(t){for(var e=Object.keys(t).sort(),n="",i=0;i<e.length;i++)n+=[e[i]]+"="+t[e[i]]+"&";return n.substring(0,n.length-1)}function a(t){if(!window.mmd5)return console.warn("先引入MD5，并且在index.html申明变量"),"";var e=s(t);return window.mmd5(e).toString().toUpperCase()}var c,h;t.call=e,t.callSign=n,t.callURL=i,t.call2=o,t.call2URL=r,t.objKeySort=s,t.signMD5=a}(RPC||(RPC={}));var RPCtip=function(t){function e(){return t.call(this)||this}return __extends(e,t),Object.defineProperty(e,"GET",{get:function(){return null==e._instance&&(e._instance=new e),e._instance},enumerable:!0,configurable:!0}),e.prototype.showToast=function(t,e,n){var i=this;if(void 0===e&&(e=!1),void 0===n&&(n=1500),this.intSet&&clearTimeout(this.intSet),this.popBox||(this.popBox=new egret.DisplayObjectContainer,this.addChild(this.popBox)),this.popBox.removeChildren(),e){GG.newRectBlock(this.popBox,0,0)}var o=new egret.TextField;o.size=24,o.text=t+"",o.anchorOffsetX=o.width>>1,o.x=stageHalfW,o.y=stageHalfH-12;var r=GG.newBitmap("data_bg_png",this.popBox);r.width=o.width+30,r.height=o.height+30,r.anchorOffsetX=r.width>>1,r.anchorOffsetY=r.height>>1,r.x=stageHalfW,r.y=stageHalfH,this.popBox.addChild(r),this.popBox.addChild(o),topC.addChild(this),this.intSet=setTimeout(function(){GG.removeDisplayObject(i.popBox),i.popBox=null,GG.removeDisplayObject(i)},n)},e.prototype.showToastMulti=function(t,e){var n=this;this.intSet&&clearTimeout(this.intSet),this.popBox||(this.popBox=new egret.DisplayObjectContainer,this.addChild(this.popBox)),this.popBox.removeChildren();var i=(GG.newRectBlock(this.popBox,0,0),new egret.TextField);i.text=t+"",i.width=30*t.length,i.anchorOffsetX=i.width>>1,i.x=stageHalfW,i.y=stageHalfH-30;var o=new egret.TextField;o.text=e+"",o.width=30*e.length,o.anchorOffsetX=o.width>>1,o.x=stageHalfW,o.y=i.y+38;var r=GG.newBitmap("data_bg_png",this.popBox);r.width=i.width+40,r.height=2*(i.height+30),r.anchorOffsetX=r.width>>1,r.anchorOffsetY=r.height>>1,r.x=stageHalfW,r.y=stageHalfH,this.popBox.addChild(r),this.popBox.addChild(i),this.popBox.addChild(o),topC.addChild(this),this.intSet=setTimeout(function(){GG.removeDisplayObject(n.popBox),n.popBox=null,GG.removeDisplayObject(n)},2e3)},e.prototype.showToastImg=function(t,e){void 0===e&&(e="data_tip_png"),this.popBox||(this.popBox=new egret.DisplayObjectContainer,this.addChild(this.popBox)),this.popBox.removeChildren();var n=(GG.newRectBlock(this.popBox,0,0),GG.newBitmap("data_bg_png",this.popBox));GG.setAnchor(n),n.x=stageHalfW,n.y=stageHalfH;var i=GG.newBitmap(e,this.popBox);GG.setAnchor(i),i.x=stageHalfW,i.y=stageHalfH-25,t=t||"";var o=new egret.TextField;o.text=t+"",o.x=20+(stageW-o.width)>>1,o.y=stageHalfH+40,o.size=24,this.popBox.addChild(o),egret.Tween.get(i,{loop:!0}).to({rotation:360},2e3),i.once(egret.Event.REMOVED_FROM_STAGE,function(){egret.Tween.removeTweens(i)},this),topC.addChild(this)},e.prototype.hideTip=function(){GG.removeDisplayObject(this.popBox),this.popBox=null,GG.removeDisplayObject(this)},e}(egret.DisplayObjectContainer);__reflect(RPCtip.prototype,"RPCtip");